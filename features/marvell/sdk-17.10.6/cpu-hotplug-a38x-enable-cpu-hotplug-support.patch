From 32663b9e880a3360841dd288d555bd65fcabfe46 Mon Sep 17 00:00:00 2001
From: orenbh <orenbh@marvell.com>
Date: Sun, 1 May 2016 17:43:42 +0300
Subject: [PATCH 0196/1345] cpu hotplug: a38x: enable cpu hotplug support

commit  d6cd9ca566445e721810118d9dc065cbadea4a0e from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

disabling cpuidle framework includes disabling of cpu hotplug
cpu hotplug is re-enable since it is required for kdump support
cpuidle remains disabled (executing only WFI mode)

Change-Id: If3b77f55981cc63abed3db98357912cfbfa5cbcd
Signed-off-by: orenbh <orenbh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/29425
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Lior Amsalem <alior@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/mach-mvebu/pmsu.c |   10 ----------
 1 file changed, 10 deletions(-)

diff --git a/arch/arm/mach-mvebu/pmsu.c b/arch/arm/mach-mvebu/pmsu.c
index a848470..46f06aa 100644
--- a/arch/arm/mach-mvebu/pmsu.c
+++ b/arch/arm/mach-mvebu/pmsu.c
@@ -529,16 +529,6 @@ static int __init mvebu_v7_cpu_pm_init(void)
 		return 0;
 	of_node_put(np);
 
-	/*
-	 * Currently the CPU idle support for Armada 38x is broken, as
-	 * the CPU hotplug uses some of the CPU idle functions it is
-	 * broken too, so let's disable it
-	 */
-	if (of_machine_is_compatible("marvell,armada380")) {
-		cpu_hotplug_disable();
-		pr_warn("CPU hotplug support is currently broken on Armada 38x: disabling\n");
-	}
-
 	if (of_machine_is_compatible("marvell,armadaxp"))
 		ret = armada_xp_cpuidle_init();
 	else if (of_machine_is_compatible("marvell,armada370"))
-- 
1.7.9.5


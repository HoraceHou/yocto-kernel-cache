From aa8ba08e53c424e531e8e6091c9e8a67bd1d8ebc Mon Sep 17 00:00:00 2001
From: Marcin Wojtas <mw@semihalf.com>
Date: Wed, 24 Feb 2016 21:39:55 +0100
Subject: [PATCH 0176/1345] arm64: dts: enable PCIe support for A37xx SoC's

commit  3ce365d8bc1add4adabc3b37febf262309bd8bfe from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: I391c13e5bf9c049bb0be3268d5640dfe411e0e08
Signed-off-by: Hezi Shahmoon <hezi@marvell.com>
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Signed-off-by: Ofer Heifetz <oferh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/28768
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-37xx.dtsi |   11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
index 7fc3c93..2c9ca63 100644
--- a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
@@ -336,6 +336,16 @@
 				};
 			};
 
+			advk_ic: interrupt-controller@74840 {
+				compatible = "marvell,advk-ic";
+				reg = <0x74840 0x10
+				       0x8b000 0x8>;
+				interrupt-controller;
+				#interrupt-cells = <1>;
+				interrupts = <GIC_SPI 29 IRQ_TYPE_LEVEL_HIGH>;
+				status = "disabled";
+			};
+
 			sdhci1: sdhci@d0000 {
 				compatible = "marvell,armada-3700-sdhci",
 					     "marvell,sdhci-xenon";
@@ -388,6 +398,7 @@
 			#interrupt-cells = <1>;
 			msi-parent = <&pcie0>;
 			msi-controller;
+			clocks = <&sb_periph_clk 13>;
 			ranges = <0x82000000 0 0xe8000000   0 0xe8000000 0 0x1000000 /* Port 0 MEM */
 				  0x81000000 0 0xe9000000   0 0xe9000000 0 0x10000>; /* Port 0 IO*/
 			interrupt-map-mask = <0 0 0 7>;
-- 
1.7.9.5


From 5ebdc68d9db719e09a6e1445dec1318108d099cf Mon Sep 17 00:00:00 2001
From: Marcin Wojtas <mw@semihalf.com>
Date: Thu, 22 Dec 2016 12:04:59 +0100
Subject: [PATCH 0673/1345] telephony: mvebu: align naming of /proc/tdm
 functions

commit  90949101100882b60203a7248d2eceb49c8a0494 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Also add comment for the section.

Change-Id: Ib35465a209d4ec0e0d5a56ce1bb505826506a2c2
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/35042
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/telephony/mvebu_phone/mv_phone_dev.c |   13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

diff --git a/drivers/telephony/mvebu_phone/mv_phone_dev.c b/drivers/telephony/mvebu_phone/mv_phone_dev.c
index 5defc2b..83899e9 100644
--- a/drivers/telephony/mvebu_phone/mv_phone_dev.c
+++ b/drivers/telephony/mvebu_phone/mv_phone_dev.c
@@ -147,7 +147,8 @@
 static u32 pcm_start_stop_state;
 static u32 is_pcm_stopping;
 
-static int proc_tdm_status_show(struct seq_file *m, void *v)
+/* Statistic printout in userspace via /proc/tdm */
+static int mv_phone_status_show(struct seq_file *m, void *v)
 {
 #ifdef CONFIG_MV_TDM_EXT_STATS
 	struct mv_phone_extended_stats tdm_ext_stats;
@@ -179,13 +180,13 @@ static int proc_tdm_status_show(struct seq_file *m, void *v)
 	return 0;
 }
 
-static int proc_tdm_status_open(struct inode *inode, struct file *file)
+static int mv_phone_status_open(struct inode *inode, struct file *file)
 {
-	return single_open(file, proc_tdm_status_show, PDE_DATA(inode));
+	return single_open(file, mv_phone_status_show, PDE_DATA(inode));
 }
 
-static const struct file_operations proc_tdm_operations = {
-	.open		= proc_tdm_status_open,
+static const struct file_operations mv_phone_operations = {
+	.open		= mv_phone_status_open,
 	.read		= seq_read,
 	.llseek		= seq_lseek,
 	.release	= seq_release,
@@ -399,7 +400,7 @@ int tdm_if_init(struct tal_params *tal_params)
 	/* Create TDM procfs statistics */
 	tdm_stats = proc_mkdir("tdm", NULL);
 	if (tdm_stats != NULL) {
-		if (!proc_create("tdm_stats", S_IRUGO, tdm_stats, &proc_tdm_operations))
+		if (!proc_create("tdm_stats", S_IRUGO, tdm_stats, &mv_phone_operations))
 			return -ENOMEM;
 	}
 
-- 
1.7.9.5


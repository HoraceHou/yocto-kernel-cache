From 121db9d00ca611a91acc80bdc9c3943a533b8a0d Mon Sep 17 00:00:00 2001
From: MengLi <meng.li@windriver.com>
Date: Mon, 2 Jul 2018 16:03:36 +0800
Subject: [PATCH 1331/1345] arm64: dts: marvell: fix the dts node conflict
 from sdk patch

During porting patches from SDK kernel, there are some conflicts introduced
in dts files. So, fix these conflicts.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/marvell/armada-3720-community.dts     |   56 ++++++++++----------
 arch/arm64/boot/dts/marvell/armada-3720-db-B.dts   |    2 +-
 arch/arm64/boot/dts/marvell/armada-3720-db-C.dts   |    2 +-
 arch/arm64/boot/dts/marvell/armada-3720-db.dts     |    5 +-
 .../boot/dts/marvell/armada-37x0-customer.dts      |   31 +----------
 .../arm64/boot/dts/marvell/armada-3900-db-axis.dts |    4 +-
 arch/arm64/boot/dts/marvell/armada-3900-db.dtsi    |    6 +--
 arch/arm64/boot/dts/marvell/armada-7020-amc.dts    |    6 +--
 arch/arm64/boot/dts/marvell/armada-7020.dtsi       |    4 +-
 arch/arm64/boot/dts/marvell/armada-7040-db-A.dts   |    6 +--
 arch/arm64/boot/dts/marvell/armada-7040-db-B.dts   |    6 +--
 arch/arm64/boot/dts/marvell/armada-7040-db-C.dts   |    6 +--
 arch/arm64/boot/dts/marvell/armada-7040-db-D.dts   |    6 +--
 arch/arm64/boot/dts/marvell/armada-7040-db-E.dts   |    6 +--
 .../boot/dts/marvell/armada-7040-db-all-pcie.dts   |    6 +--
 .../arm64/boot/dts/marvell/armada-7040-db-nand.dts |    6 +--
 .../dts/marvell/armada-7040-db-pp2-vanilla.dts     |    6 +--
 arch/arm64/boot/dts/marvell/armada-7040-pcac.dts   |    6 +--
 arch/arm64/boot/dts/marvell/armada-7040.dtsi       |    4 +-
 .../boot/dts/marvell/armada-70x0-customer.dts      |    6 +--
 arch/arm64/boot/dts/marvell/armada-8040-db-B.dts   |   10 ++--
 arch/arm64/boot/dts/marvell/armada-8040-db-C.dts   |   10 ++--
 arch/arm64/boot/dts/marvell/armada-8040-db-D.dts   |   10 ++--
 arch/arm64/boot/dts/marvell/armada-8040-db-E.dts   |   10 ++--
 .../dts/marvell/armada-8040-db-pp2-vanilla.dts     |   10 ++--
 arch/arm64/boot/dts/marvell/armada-8040-db.dts     |    7 +++
 .../dts/marvell/armada-8040-mcbin-pp2-vanilla.dts  |   10 ++--
 .../dts/marvell/armada-8040-mcbin-single-shot.dts  |    8 +--
 arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts  |    2 +-
 .../boot/dts/marvell/armada-80x0-customer.dts      |   10 ++--
 arch/arm64/boot/dts/marvell/armada-ap806-dual.dtsi |   14 ++---
 arch/arm64/boot/dts/marvell/armada-ap806-quad.dtsi |   22 ++++----
 .../boot/dts/marvell/armada-cp110-master.dtsi      |   38 +++++++++++--
 .../arm64/boot/dts/marvell/armada-cp110-slave.dtsi |   18 ++++---
 34 files changed, 186 insertions(+), 173 deletions(-)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-community.dts b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
index 992c4c9..4576750 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-community.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
@@ -59,7 +59,7 @@
 	};
 
 	soc {
-		internal-regs {
+		internal-regs@d0000000 {
 			uart0: serial@12000 {
 				status = "okay";
 			};
@@ -192,36 +192,36 @@
 		#size-cells = <0>;
 
 		switch@0 {
-				#address-cells = <1>;
-				#size-cells = <0>;
-				reg = <1 0>;
-
-				port@0 {
-						reg = <0>;
-						label = "cpu";
-						fixed-link {
-							speed = <1000>;
-							full-duplex;
-						};
-				};
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <1 0>;
+
+			port@0 {
+					reg = <0>;
+					label = "cpu";
+					fixed-link {
+						speed = <1000>;
+						full-duplex;
+					};
+			};
 
-				port@1 {
-						reg = <1>;
-						label = "wan";
-						phy-handle = <&phy1>;
-				};
+			port@1 {
+					reg = <1>;
+					label = "wan";
+					phy-handle = <&phy1>;
+			};
 
-				port@2 {
-						reg = <2>;
-						label = "lan0";
-						phy-handle = <&phy2>;
-				};
+			port@2 {
+					reg = <2>;
+					label = "lan0";
+					phy-handle = <&phy2>;
+			};
 
-				port@3 {
-						reg = <3>;
-						label = "lan1";
-						phy-handle = <&phy3>;
-				};
+			port@3 {
+					reg = <3>;
+					label = "lan1";
+					phy-handle = <&phy3>;
+			};
 		};
 	};
 };
diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db-B.dts b/arch/arm64/boot/dts/marvell/armada-3720-db-B.dts
index c58d641..0af1737 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db-B.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db-B.dts
@@ -50,7 +50,7 @@
  */
 / {
 	soc {
-		internal-regs {
+		internal-regs@d0000000 {
 			eth1: ethernet@40000 {
 				phy-mode = "sgmii";
 				phy = <&phy1>;
diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db-C.dts b/arch/arm64/boot/dts/marvell/armada-3720-db-C.dts
index 7964b26..5780cb9 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db-C.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db-C.dts
@@ -50,7 +50,7 @@
  */
 / {
 	soc {
-		internal-regs {
+		internal-regs@d0000000 {
 			eth1: ethernet@40000 {
 				phy-mode = "sgmii";
 				phys = <&a3700_comphy 0 COMPHY_SGMII1>;
diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db.dts b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
index f1cac4a..4eb6f1b 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
@@ -75,7 +75,7 @@
 		internal-regs@d0000000 {
 			sd_pwrseq: sd-pwrseq {
 				compatible = "mmc-pwrseq-a3700-sd";
-				pwren-gpios = <&expander0 4 GPIO_ACTIVE_HIGH>;
+				pwren-gpios = <&gpio_exp 4 GPIO_ACTIVE_HIGH>;
 			};
 
 			vcc_sd_reg1: regulator@0 {
@@ -212,9 +212,6 @@
 		spi-rx-bus-width = <4>;
 		spi-tx-bus-width = <4>;
 
-		pinctrl-names = "default";
-		pinctrl-0 = <&spi0_pins>;
-
 		partitions {
 			compatible = "fixed-partitions";
 			#address-cells = <1>;
diff --git a/arch/arm64/boot/dts/marvell/armada-37x0-customer.dts b/arch/arm64/boot/dts/marvell/armada-37x0-customer.dts
index e3f10df..0f8a9a3 100644
--- a/arch/arm64/boot/dts/marvell/armada-37x0-customer.dts
+++ b/arch/arm64/boot/dts/marvell/armada-37x0-customer.dts
@@ -84,36 +84,7 @@
 	};
 
 	soc {
-		internal-regs {
-			spi0: spi@10600 {
-				status = "disabled";
-				/* UPDATE */
-				spi-flash@0 {
-					#address-cells = <1>;
-					#size-cells = <1>;
-					compatible = "jedec,spi-nor";
-					reg = <0>; /* Chip select 0 */
-					spi-max-frequency = <104000000>;
-					m25p,fast-read;
-
-					pinctrl-names = "default";
-					pinctrl-0 = <&spi0_pins &spi_quad_pins>;
-
-					partition@0 {
-						label = "Bootloader";
-						reg = <0 0x200000>;
-					};
-					partition@200000 {
-						label = "U-boot Env";
-						reg = <0x200000 0x10000>;
-					};
-					partition@210000 {
-						label = "Linux";
-						reg = <0x210000 0xDF0000>;
-					};
-				};
-			};
-
+		internal-regs@d0000000 {
 			i2c0: i2c@11000 {
 				status = "disabled";
 				/* UPDATE */
diff --git a/arch/arm64/boot/dts/marvell/armada-3900-db-axis.dts b/arch/arm64/boot/dts/marvell/armada-3900-db-axis.dts
index 83d0013..ec0a8e9 100644
--- a/arch/arm64/boot/dts/marvell/armada-3900-db-axis.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3900-db-axis.dts
@@ -47,8 +47,8 @@
 	compatible = "marvell,armada3900-db-axis", "marvell,armada7040",
 		     "marvell,armada-ap806-quad", "marvell,armada-ap806";
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			pinctrl@440000 {
 				cpm_xhci0_vbus_pins: cpm-xhci0-vbus-pins {
 					marvell,pins = "mpp7";
diff --git a/arch/arm64/boot/dts/marvell/armada-3900-db.dtsi b/arch/arm64/boot/dts/marvell/armada-3900-db.dtsi
index 4bc59f9..8268b37 100644
--- a/arch/arm64/boot/dts/marvell/armada-3900-db.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-3900-db.dtsi
@@ -55,7 +55,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -89,8 +89,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			usb3h0: usb3@500000 {
 				status = "okay";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7020-amc.dts b/arch/arm64/boot/dts/marvell/armada-7020-amc.dts
index c0ff0b4..06dfb3e 100644
--- a/arch/arm64/boot/dts/marvell/armada-7020-amc.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7020-amc.dts
@@ -58,7 +58,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			spi0: spi@510600 {
 				status = "okay";
 			};
@@ -74,8 +74,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			pinctrl@440000 {
 				i2c1_pins: i2c-pins-1 {
 					marvell,pins = "mpp50", "mpp51";
diff --git a/arch/arm64/boot/dts/marvell/armada-7020.dtsi b/arch/arm64/boot/dts/marvell/armada-7020.dtsi
index 97307fe..f88f3e6 100644
--- a/arch/arm64/boot/dts/marvell/armada-7020.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-7020.dtsi
@@ -63,7 +63,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			smmu: iommu@5000000 {
 				mmu-masters = <&usb3h0 0x483>,
 					      <&usb3h1 0x484>,
@@ -82,7 +82,7 @@
 	};
 
 	cp110-master {
-		config-space {
+		config-space@f2000000 {
 			pinctrl@440000 {
 			compatible = "marvell,a70x0-pinctrl";
 				cpm_tdm_pins: tdm-pins {
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-A.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-A.dts
index 62063f4..9b0219c 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-A.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-A.dts
@@ -57,7 +57,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -71,8 +71,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			serial@702000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-B.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-B.dts
index 2158221..dc924d4 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-B.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-B.dts
@@ -62,7 +62,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -76,8 +76,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			serial@702000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-C.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-C.dts
index d53681a..039811e 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-C.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-C.dts
@@ -62,7 +62,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -76,8 +76,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			serial@702000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-D.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-D.dts
index 2229329..045c0e2 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-D.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-D.dts
@@ -62,7 +62,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -76,8 +76,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			pinctrl@440000 {
 			compatible = "marvell,a70x0-pinctrl";
 				pca0_pins: pca0_pins {
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-E.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-E.dts
index 1dc199a..f304ac5 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-E.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-E.dts
@@ -57,7 +57,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -71,8 +71,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			serial@702000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-all-pcie.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-all-pcie.dts
index 83d7f4f..74660bf 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-all-pcie.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-all-pcie.dts
@@ -57,7 +57,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -71,8 +71,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			serial@702000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-nand.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-nand.dts
index 040f237..b51f5a6 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-nand.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-nand.dts
@@ -57,7 +57,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -71,8 +71,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			serial@702000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-db-pp2-vanilla.dts b/arch/arm64/boot/dts/marvell/armada-7040-db-pp2-vanilla.dts
index 10b5ab2..70ec323 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-db-pp2-vanilla.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-db-pp2-vanilla.dts
@@ -63,7 +63,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "okay";
 			};
@@ -77,8 +77,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			/delete-node/ppv22@000000;
 			serial@702000 {
 				status = "disabled";
diff --git a/arch/arm64/boot/dts/marvell/armada-7040-pcac.dts b/arch/arm64/boot/dts/marvell/armada-7040-pcac.dts
index 4d6c244..b7209e8 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040-pcac.dts
+++ b/arch/arm64/boot/dts/marvell/armada-7040-pcac.dts
@@ -61,7 +61,7 @@
 	chosen { };
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			spi0: spi@510600 {
 				status = "disabled";
 			};
@@ -89,8 +89,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			comphy0: comphy {
 				skip_pcie_power_off;
 				status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-7040.dtsi b/arch/arm64/boot/dts/marvell/armada-7040.dtsi
index 7cdc8a0..6a8477d 100644
--- a/arch/arm64/boot/dts/marvell/armada-7040.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-7040.dtsi
@@ -64,8 +64,8 @@
 	ap806 {
 		config-space@f0000000 {
 			smmu: iommu@5000000 {
-				mmu-masters = <&usb3h0 0x483>,
-					      <&usb3h1 0x484>,
+				mmu-masters = <&cpm_usb3_0 0x483>,
+					      <&cpm_usb3_1 0x484>,
 					      <&sata 0x485>,
 					      <&cp_xor0 0x489>,
 					      <&cp_xor1 0x48a>;
diff --git a/arch/arm64/boot/dts/marvell/armada-70x0-customer.dts b/arch/arm64/boot/dts/marvell/armada-70x0-customer.dts
index 9c1c150..79eaed2 100644
--- a/arch/arm64/boot/dts/marvell/armada-70x0-customer.dts
+++ b/arch/arm64/boot/dts/marvell/armada-70x0-customer.dts
@@ -83,7 +83,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			sdhci@6e0000 {
 				status = "disabled";
 			};
@@ -112,8 +112,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			pinctrl@440000 {
 				u3d_vbus_pins: pca0_pins {
 					marvell,pins = "mpp62";
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-B.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-B.dts
index 15ecac7..01c8494 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-B.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-B.dts
@@ -64,7 +64,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -80,8 +80,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			/* usb3h0 is USB2 only (UTMI) */
 			usb3h0: usb3@500000 {
 				status = "okay";
@@ -156,8 +156,8 @@
 			status = "okay";
 		};
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			usb3h0_1: usb3@500000 {
 				separated-phys-for-usb2-usb3;
 				phys = <&utmi0_1>,
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-C.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-C.dts
index e5d44e4..3ab205d 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-C.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-C.dts
@@ -64,7 +64,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -80,8 +80,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			sata@540000 {
 				status = "okay";
 				sata-port@0 {
@@ -170,8 +170,8 @@
 			status = "okay";
 		};
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			/* usb3h0_1 is USB2 only (UTMI) */
 			usb3h0_1: usb3@500000 {
 				status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-D.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-D.dts
index 298ebbf..2b66f4f 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-D.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-D.dts
@@ -65,7 +65,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -81,8 +81,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			sata@540000 {
 				status = "okay";
 				sata-port@0 {
@@ -171,8 +171,8 @@
 			status = "okay";
 		};
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			/* usb3h0_1 is USB2 only (UTMI) */
 			usb3h0_1: usb3@500000 {
 				status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-E.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-E.dts
index 0fe4ac4..c76ead4 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-E.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-E.dts
@@ -64,7 +64,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -82,8 +82,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			sata@540000 {
 				status = "okay";
 				sata-port@0 {
@@ -173,8 +173,8 @@
 			status = "okay";
 		};
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			/* usb3h0_1 is USB2 only (UTMI) */
 			usb3h0_1: usb3@500000 {
 				status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-pp2-vanilla.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-pp2-vanilla.dts
index ea8e394..df74cd9 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-pp2-vanilla.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-pp2-vanilla.dts
@@ -65,7 +65,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -81,8 +81,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			/delete-node/ppv22@000000;
 			sata@540000 {
 				status = "okay";
@@ -180,8 +180,8 @@
 			status = "okay";
 		};
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			/delete-node/ppv22@000000;
 			/* usb3h0_1 is USB2 only (UTMI) */
 			usb3h0_1: usb3@500000 {
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db.dts b/arch/arm64/boot/dts/marvell/armada-8040-db.dts
index 959486a..a37bae8 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db.dts
@@ -69,6 +69,13 @@
 
 	cp110-master {
 		config-space@f2000000 {
+			mdio@12a200 {
+				#address-cells = <1>;
+				#size-cells = <0>;
+				mdio0_phy1: ethernet-phy@1 {
+					reg = <1>;
+				};
+			};
 			gop {
 				emac0: mac0 {
 					phy-mode = "sfi"; /* lane-2 */
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-mcbin-pp2-vanilla.dts b/arch/arm64/boot/dts/marvell/armada-8040-mcbin-pp2-vanilla.dts
index 2a478665..d9b9376 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-mcbin-pp2-vanilla.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-mcbin-pp2-vanilla.dts
@@ -64,7 +64,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "okay";
 			};
@@ -87,8 +87,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			/delete-node/ppv22@000000;
 			pinctrl@440000 {
 				xhci0_vbus_pins: xhci0-vbus-pins {
@@ -229,8 +229,8 @@
 		};
 	};
 
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			/delete-node/ppv22@000000;
 			comphy1: comphy {
 				status = "disabled";
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-mcbin-single-shot.dts b/arch/arm64/boot/dts/marvell/armada-8040-mcbin-single-shot.dts
index 856228b..ae62f0c 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-mcbin-single-shot.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-mcbin-single-shot.dts
@@ -54,8 +54,8 @@
 		     "marvell,armada8040", "marvell,armada-ap806-quad",
 		     "marvell,armada-ap806";
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 		/delete-node/mdio@15b000;
 			gop {
 				emac0_0: mac0 {
@@ -64,8 +64,8 @@
 			};
 		};
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			gop {
 				emac0_1: mac0 {
 					/delete-property/phy;
diff --git a/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts b/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts
index 831297a..2db7cc9 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-mcbin.dts
@@ -315,4 +315,4 @@
 	smi_phy0: ethernet-phy@0 {
 		reg = <0>;
 	};
-}
+};
diff --git a/arch/arm64/boot/dts/marvell/armada-80x0-customer.dts b/arch/arm64/boot/dts/marvell/armada-80x0-customer.dts
index 7f783eb..8cbc963 100644
--- a/arch/arm64/boot/dts/marvell/armada-80x0-customer.dts
+++ b/arch/arm64/boot/dts/marvell/armada-80x0-customer.dts
@@ -78,7 +78,7 @@
 	};
 
 	ap806 {
-		config-space {
+		config-space@f0000000 {
 			serial@512000 {
 				status = "disabled";
 			};
@@ -128,8 +128,8 @@
 		};
 	};
 
-	cpn-110-master {
-		config-space {
+	cp110-master {
+		config-space@f2000000 {
 			sata@540000 {
 				status = "disabled";
 
@@ -237,8 +237,8 @@
 		};
 
 	};
-	cpn-110-slave {
-		config-space {
+	cp110-slave {
+		config-space@f4000000 {
 			usb3h0_1: usb3@500000 {
 				status = "disabled";
 			};
diff --git a/arch/arm64/boot/dts/marvell/armada-ap806-dual.dtsi b/arch/arm64/boot/dts/marvell/armada-ap806-dual.dtsi
index fb1346f..49548fb 100644
--- a/arch/arm64/boot/dts/marvell/armada-ap806-dual.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-ap806-dual.dtsi
@@ -100,7 +100,7 @@
 				reg = <0xc40000 0x1000>;
 
 				cpu = <&cpu0>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 				port {
 					etm0_out: endpoint {
@@ -114,7 +114,7 @@
 				reg = <0xd40000 0x1000>;
 
 				cpu = <&cpu1>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 				port {
 					etm1_out: endpoint {
@@ -127,7 +127,7 @@
 			etf0@809000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x809000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -154,7 +154,7 @@
 			etf1@80a000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x80a000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -181,7 +181,7 @@
 			funnel@810000 {
 				compatible = "arm,coresight-funnel", "arm,primecell";
 				reg = <0x810000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -219,7 +219,7 @@
 			etf5@811000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x811000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -247,7 +247,7 @@
 			etr@812000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x812000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				port {
diff --git a/arch/arm64/boot/dts/marvell/armada-ap806-quad.dtsi b/arch/arm64/boot/dts/marvell/armada-ap806-quad.dtsi
index c18cf3b..12b073e 100644
--- a/arch/arm64/boot/dts/marvell/armada-ap806-quad.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-ap806-quad.dtsi
@@ -127,7 +127,7 @@
 				reg = <0xc40000 0x1000>;
 
 				cpu = <&cpu0>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 				port {
 					etm0_out: endpoint {
@@ -141,7 +141,7 @@
 				reg = <0xd40000 0x1000>;
 
 				cpu = <&cpu1>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 				port {
 					etm1_out: endpoint {
@@ -155,7 +155,7 @@
 				reg = <0xe40000 0x1000>;
 
 				cpu = <&cpu2>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 				port {
 					etm2_out: endpoint {
@@ -169,7 +169,7 @@
 				reg = <0xf40000 0x1000>;
 
 				cpu = <&cpu3>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 				port {
 					etm3_out: endpoint {
@@ -181,7 +181,7 @@
 			etf0@809000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x809000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -208,7 +208,7 @@
 			etf1@80a000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x80a000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -235,7 +235,7 @@
 			etf2@80b000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x80b000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -262,7 +262,7 @@
 			etf3@80c000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x80c000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -289,7 +289,7 @@
 			funnel@810000 {
 				compatible = "arm,coresight-funnel", "arm,primecell";
 				reg = <0x810000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -342,7 +342,7 @@
 			etf5@811000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x811000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				ports {
@@ -370,7 +370,7 @@
 			etr@812000 {
 				compatible = "arm,coresight-tmc", "arm,primecell";
 				reg = <0x812000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&ap_syscon 3>;
 				clock-names = "apb_pclk";
 
 				port {
diff --git a/arch/arm64/boot/dts/marvell/armada-cp110-master.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110-master.dtsi
index 13ceb00..3ac2890 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110-master.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110-master.dtsi
@@ -45,6 +45,8 @@
  */
 
 #include <dt-bindings/phy/phy-comphy-mvebu.h>
+#include <dt-bindings/interrupt-controller/mvebu-icu.h>
+#include <dt-bindings/phy/phy-utmi-mvebu.h>
 
 / {
 	cp110-master {
@@ -393,6 +395,12 @@
 				status = "disabled";
 			};
 
+			cpm_sar: sar@400200 {
+				compatible = "marvell,sample-at-reset-cp110";
+				reg = <0x400200 0x8>;
+				status = "okay";
+			};
+
 			nand@720000 {
 				compatible = "marvell,armada370-nand";
 				reg = <0x720000 0x54>;
@@ -447,6 +455,30 @@
 				clocks = <&cpm_syscon0 0  3>;
 				status = "disabled";
 			};
+
+			utmi0: utmi@580000 {
+				compatible = "marvell,cp110-utmi-phy";
+				reg = <0x580000 0x1000>,
+				      <0x440420 0x4>,
+				      <0x440440 0x4>;
+				reg-names = "utmi", "usb-cfg-reg", "utmi-cfg-reg";
+				utmi-port = <UTMI_PHY_TO_USB3_HOST0>;
+				utmi-index = <0>;
+				#phy-cells = <0>;
+				status = "disabled";
+			};
+
+			utmi1: utmi@581000 {
+				compatible = "marvell,cp110-utmi-phy";
+				reg = <0x581000 0x1000>,
+				      <0x440420 0x4>,
+				      <0x440444 0x4>;
+				reg-names = "utmi", "usb-cfg-reg", "utmi-cfg-reg";
+				utmi-port = <UTMI_PHY_TO_USB3_HOST1>;
+				utmi-index = <1>;
+				#phy-cells = <0>;
+				status = "disabled";
+			};
 		};
 
 		cpm_pcie0: pcie@f2600000 {
@@ -468,7 +500,7 @@
 				/* non-prefetchable memory */
 				0x82000000 0 0xf6000000 0  0xf6000000 0 0xf00000>;
 			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0 0 0 0 &cpm_icu 0 ICU_GRP_NSR 22 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-map = <0 0 0 0 &icu_m ICU_GRP_NSR 22 IRQ_TYPE_LEVEL_HIGH>;
 			interrupts = <ICU_GRP_NSR 22 IRQ_TYPE_LEVEL_HIGH>;
 
 			num-lanes = <1>;
@@ -495,7 +527,7 @@
 				/* non-prefetchable memory */
 				0x82000000 0 0xf7000000 0  0xf7000000 0 0xf00000>;
 			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0 0 0 0 &cpm_icu 0 ICU_GRP_NSR 24 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-map = <0 0 0 0 &icu_m ICU_GRP_NSR 24 IRQ_TYPE_LEVEL_HIGH>;
 			interrupts = <ICU_GRP_NSR 24 IRQ_TYPE_LEVEL_HIGH>;
 
 			num-lanes = <1>;
@@ -522,7 +554,7 @@
 				/* non-prefetchable memory */
 				0x82000000 0 0xf8000000 0  0xf8000000 0 0xf00000>;
 			interrupt-map-mask = <0 0 0 0>;
-			interrupt-map = <0 0 0 0 &cpm_icu 0 ICU_GRP_NSR 23 IRQ_TYPE_LEVEL_HIGH>;
+			interrupt-map = <0 0 0 0 &icu_m ICU_GRP_NSR 23 IRQ_TYPE_LEVEL_HIGH>;
 			interrupts = <ICU_GRP_NSR 23 IRQ_TYPE_LEVEL_HIGH>;
 
 			num-lanes = <1>;
diff --git a/arch/arm64/boot/dts/marvell/armada-cp110-slave.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110-slave.dtsi
index 8fc42f8..e054ef0 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110-slave.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110-slave.dtsi
@@ -283,49 +283,55 @@
 			axim-cp-rd@3c5000 {
 				compatible = "marvell,coresight-axim", "arm,primecell";
 				reg = <0x3c5000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&cps_syscon0 3>;
 				clock-names = "apb_pclk";
 				bus-width = <40>;
+				status = "disabled";
 			};
 
 			axim-cp-wr@3c6000 {
 				compatible = "marvell,coresight-axim", "arm,primecell";
 				reg = <0x3c6000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&cps_syscon0 3>;
 				clock-names = "apb_pclk";
 				bus-width = <40>;
+				status = "disabled";
 			};
 
 			axim-ppv2-rd@3c0000 {
 				compatible = "marvell,coresight-axim", "arm,primecell";
 				reg = <0x3c0000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&cps_syscon0 3>;
 				clock-names = "apb_pclk";
 				bus-width = <40>;
+				status = "disabled";
 			};
 
 			axim-ppv2-wr@3c1000 {
 				compatible = "marvell,coresight-axim", "arm,primecell";
 				reg = <0x3c1000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&cps_syscon0 3>;
 				clock-names = "apb_pclk";
 				bus-width = <40>;
+				status = "disabled";
 			};
 
 			axim-hb1-rd@3c8000 {
 				compatible = "marvell,coresight-axim", "arm,primecell";
 				reg = <0x3c8000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&cps_syscon0 3>;
 				clock-names = "apb_pclk";
 				bus-width = <40>;
+				status = "disabled";
 			};
 
 			axim-hb1-wr@3c9000 {
 				compatible = "marvell,coresight-axim", "arm,primecell";
 				reg = <0x3c9000 0x1000>;
-				clocks = <&syscon 3>;
+				clocks = <&cps_syscon0 3>;
 				clock-names = "apb_pclk";
 				bus-width = <40>;
+				status = "disabled";
 			};
 
 			gop {
-- 
1.7.9.5


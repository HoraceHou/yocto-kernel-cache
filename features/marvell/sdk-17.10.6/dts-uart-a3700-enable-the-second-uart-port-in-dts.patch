From ffc9b9db0a8588240d12c79ec6056b7f503eabb8 Mon Sep 17 00:00:00 2001
From: allen yan <yanwei@marvell.com>
Date: Tue, 27 Dec 2016 00:08:59 +0800
Subject: [PATCH 0788/1345] dts: uart: a3700: enable the second uart port in
 dts

commit  4969d4aa2a01bef89f37cd6b7a867612b6950c76 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: Ic245d1b55cef90b7bae32f3897768a4cb0969a2d
Signed-off-by: allen yan <yanwei@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/35006
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Hua Jing <jinghua@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-3720-db.dts |    6 ++++++
 arch/arm64/boot/dts/marvell/armada-37xx.dtsi   |   14 ++++++++++++++
 2 files changed, 20 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db.dts b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
index 6f78653..c35ccbe 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
@@ -210,6 +210,12 @@
 	status = "okay";
 };
 
+&uart1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&uart1_pins>;
+	status = "okay";
+};
+
 &sdhci0 {
 	non-removable;
 	bus-width = <8>;
diff --git a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
index 09ce177..38effb7 100644
--- a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
@@ -57,7 +57,10 @@
 	#size-cells = <2>;
 
 	aliases {
+		ethernet0 = &eth0;
+		ethernet1 = &eth1;
 		serial0 = &uart0;
+		serial1 = &uart1;
 	};
 
 	cpus {
@@ -147,6 +150,17 @@
 				status = "disabled";
 			};
 
+			uart1: serial@12200 {
+				compatible = "marvell,armada-3700-uart-ext";
+				reg = <0x12200 0x30>,
+					<0x8a00 0x30>;
+				clocks = <&xtalclk>;
+				interrupts = <GIC_SPI 31 IRQ_TYPE_LEVEL_HIGH>,
+						<GIC_SPI 30 IRQ_TYPE_LEVEL_HIGH>;
+				interrupt-names = "irq_rx", "irq_tx";
+				status = "disabled";
+			};
+
 			nb_periph_clk: nb-periph-clk@13000 {
 				compatible = "marvell,armada-3700-periph-clock-nb";
 				reg = <0x13000 0x100>;
-- 
1.7.9.5


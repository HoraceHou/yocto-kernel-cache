From b9372929e1f6cf67b584f2443e413b1ea01d29c7 Mon Sep 17 00:00:00 2001
From: Terry Zhou <bjzhou@marvell.com>
Date: Tue, 1 Mar 2016 09:22:29 +0800
Subject: [PATCH 0138/1345] dts: pinctrl: a3700: enable spi0 pins in the dts
 node

commit  ba1a52f54826b7e4a0e41a7c0a7ab66c8d0636a4 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: I6c8b4d5c67490a9405c3e0739e1c9b755c6c9cca
Signed-off-by: Terry Zhou <bjzhou@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/27951
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Wilson Ding <dingwei@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-3720-db.dts |    3 +++
 arch/arm64/boot/dts/marvell/armada-37xx.dtsi   |    5 +++++
 2 files changed, 8 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db.dts b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
index db24060..3566b65 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
@@ -125,6 +125,9 @@
 		spi-rx-bus-width = <4>;
 		spi-tx-bus-width = <4>;
 
+		pinctrl-names = "default";
+		pinctrl-0 = <&spi0_pins>;
+
 		partitions {
 			compatible = "fixed-partitions";
 			#address-cells = <1>;
diff --git a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
index ab56216..fd7c8f2 100644
--- a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
@@ -268,6 +268,11 @@
 			npinctrl: north-bridge-pinctrl@13830 {
 				compatible = "marvell,armada-3700-nb-pinctrl";
 				reg = <0x13830 0x4>;
+
+				spi0_pins: spi-pins-0 {
+					marvell,pins = "mpp15", "mpp18";
+					marvell,function = "spi";
+				};
 			};
 
 			sgateclk: south-bridge-gate-clk@18014 {
-- 
1.7.9.5


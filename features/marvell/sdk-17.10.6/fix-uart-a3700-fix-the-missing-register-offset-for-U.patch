From 23d105f55d79963b64689cae5f8f4f98483f139c Mon Sep 17 00:00:00 2001
From: allen yan <yanwei@marvell.com>
Date: Mon, 6 Feb 2017 17:14:57 +0800
Subject: [PATCH 0775/1345] fix: uart: a3700: fix the missing register offset
 for UART interrupt

commit  838f3ac1e2bdbc0ac5c180c2acf1569d352a6c75 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: I21c5335b291aef82a894d951ba72f6b55e3db12f
Signed-off-by: allen yan <yanwei@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/36490
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Wilson Ding <dingwei@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/tty/serial/mvebu-uart.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/tty/serial/mvebu-uart.c b/drivers/tty/serial/mvebu-uart.c
index 9fa8d35..21c1fc7 100644
--- a/drivers/tty/serial/mvebu-uart.c
+++ b/drivers/tty/serial/mvebu-uart.c
@@ -938,7 +938,7 @@ static int mvebu_uart_probe(struct platform_device *pdev)
 		data->intr.uart_int_base = devm_ioremap_resource(&pdev->dev, uart_int_base);
 		if (IS_ERR(data->intr.uart_int_base))
 			return -PTR_ERR(data->intr.uart_int_base);
-		value = readl(data->intr.uart_int_base);
+		value = readl(data->intr.uart_int_base + NORTH_BRIDGE_UART_EXT_INT_SEL);
 		writel(value | UART_EXT_TX_INT_SEL | UART_EXT_RX_INT_SEL, data->intr.uart_int_base +
 			   NORTH_BRIDGE_UART_EXT_INT_SEL);
 	}
-- 
1.7.9.5


From 174412ccb5b1b07b2a1f2a57bb0cc32192ccb6fc Mon Sep 17 00:00:00 2001
From: Marcin Wojtas <mw@semihalf.com>
Date: Wed, 11 Jan 2017 00:02:28 +0100
Subject: [PATCH 0752/1345] ARM: dts: axp: Add telephony support

commit  1900441bd2f908fad626ffcdf3a06f66313d147c from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

This commit adds main tdm node for Armada XP, as well
as its pinctrl information. It also extends SPI0 pin list
with additonal CS1 and CS2.

Change-Id: Ica088727a95524f8b68a65071b254fadb727966d
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Signed-off-by: Igal Liberman <igall@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/35873
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/armada-xp.dtsi |   22 ++++++++++++++++++++--
 1 file changed, 20 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/armada-xp.dtsi b/arch/arm/boot/dts/armada-xp.dtsi
index e526b27..ea28a06 100644
--- a/arch/arm/boot/dts/armada-xp.dtsi
+++ b/arch/arm/boot/dts/armada-xp.dtsi
@@ -220,6 +220,16 @@
 				status = "disabled";
 			};
 
+			tdm@b0000 {
+				compatible = "marvell,armada-xp-tdm";
+				reg = <0xb0000 0x9000>;
+				reg-names = "tdm_regs";
+				interrupts = <56>;
+				clocks = <&gateclk 25>;
+				clock-names = "gateclk";
+				status = "disabled";
+			};
+
 			xor0: xor@f0900 {
 				compatible = "marvell,orion-xor";
 				reg = <0xF0900 0x100
@@ -347,6 +357,14 @@
 		marvell,function = "ge1";
 	};
 
+	tdm_pins: tdm-pins {
+		marvell,pins =
+		     "mpp24", "mpp25", "mpp26", "mpp27",
+		     "mpp28", "mpp29", "mpp30", "mpp31",
+		     "mpp32", "mpp33", "mpp34", "mpp35";
+		marvell,function = "tdm";
+	};
+
 	sdio_pins: sdio-pins {
 		marvell,pins = "mpp30", "mpp31", "mpp32",
 			       "mpp33", "mpp34", "mpp35";
@@ -354,8 +372,8 @@
 	};
 
 	spi0_pins: spi0-pins {
-		marvell,pins = "mpp36", "mpp37",
-			       "mpp38", "mpp39";
+		marvell,pins = "mpp36", "mpp37", "mpp38",
+			       "mpp39", "mpp40", "mpp41";
 		marvell,function = "spi0";
 	};
 
-- 
1.7.9.5


From c39a8b518ff04b81d55bcf3a01006aea0871baf2 Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Mon, 29 Aug 2016 18:42:08 +0300
Subject: [PATCH 0443/1345] mvpp2x: netmap: support netmap to own rx_queues
 subset of ethdev

commit  4cc7b839ad6f2f4cd8ac89c7b7e6c68552091e04 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: I8440ccf06afb5a05525a75f780894781642527a0
Signed-off-by: Stefan Chulski <stefanc@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/32343
Reviewed-by: Yuval Caduri <cyuval@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
index 0066202..56cd37e 100644
--- a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
+++ b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
@@ -2156,6 +2156,8 @@ static int mv_pp2x_rx(struct mv_pp2x_port *port, struct napi_struct *napi,
 
 			if (netmap_rx_irq(port->dev, 0, &netmap_done))
 				return netmap_done;
+		/* Netmap implementation includes all queues in i/f.*/
+		return 1;
 		}
 #endif /* DEV_NETMAP */
 
-- 
1.7.9.5


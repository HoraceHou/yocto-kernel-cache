From bf12a8f010313961f1af89f5c8c1b1573495bb8c Mon Sep 17 00:00:00 2001
From: Igal Liberman <igall@marvell.com>
Date: Thu, 14 Jul 2016 11:53:41 +0300
Subject: [PATCH 0599/1345] arm64: dts: cp110: add TDM node on CP110 slave

commit  dcc139148f9b71ea11b3c5d34cebbc78e9a26039 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

DMA coherency is not working fine for A8040 TDM subsystem,
so 'dma-coherent' property is not added to the device node.

Change-Id: I3c7db12e059684e964013557795091816c800641
Signed-off-by: Igal Liberman <igall@marvell.com>
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/33911
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi |   12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi
index b20c915..f534fbe 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi
@@ -133,6 +133,18 @@ nand@720000 {
 	status = "disabled";
 };
 
+tdm@7a0000 {
+	compatible = "marvell,armada-a8k-tdm";
+	reg = <0x7a0000 0x20000>;
+	reg-names = "tdm_regs";
+	interrupts = <GIC_SPI 80 IRQ_TYPE_LEVEL_HIGH>,
+		     <GIC_SPI 81 IRQ_TYPE_LEVEL_HIGH>,
+		     <GIC_SPI 82 IRQ_TYPE_LEVEL_HIGH>;
+	clocks = <&cps_syscon0 1 1>;
+	clock-names = "gateclk";
+	status = "disabled";
+};
+
 cpxor0@6a0000 {
 	compatible = "marvell,mv-xor-v2";
 	reg = <0x6a0000 0x1000>,
-- 
1.7.9.5


From 692269cac26a11f921699685f0efa3dd11dca66b Mon Sep 17 00:00:00 2001
From: Hanna Hawa <hannah@marvell.com>
Date: Sun, 9 Oct 2016 18:24:36 +0300
Subject: [PATCH 0535/1345] fix: spi: dts: ap806: add SPI partitions for
 AP-806 SPI flash

commit  ea6a99192f05c46a4811e0e57aeeb036bc17ac57 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Partitions are: Boot loader1 2M
		File-system 13M
		Boot loader2 1M

Change-Id: Ib66a9c4c54758777b55ce43f867c51869fd0d29e
Signed-off-by: Hanna Hawa <hannah@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/33231
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-8040-db.dtsi |   23 +++++++++++++++++++++++
 1 file changed, 23 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db.dtsi b/arch/arm64/boot/dts/marvell/armada-8040-db.dtsi
index 4f8b107..d5052ec 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db.dtsi
@@ -77,6 +77,29 @@
 					pagesize = <32>;
 				};
 			};
+			spi0: spi@510600 {
+				status = "okay";
+				spi-flash@0 {
+					#address-cells = <0x1>;
+					#size-cells = <0x1>;
+					compatible = "jedec,spi-nor";
+					reg = <0x0>;
+					spi-max-frequency = <20000000>;
+					partition@0 {
+						label = "boot";
+						reg = <0x0 0x200000>;
+					};
+					partition@200000 {
+						label = "Filesystem";
+						reg = <0x200000 0xd00000>;
+					};
+					partition@d00000 {
+						label = "boot_2nd";
+						reg = <0xf00000 0x100000>;
+					};
+				};
+			};
+
 		};
 	};
 
-- 
1.7.9.5


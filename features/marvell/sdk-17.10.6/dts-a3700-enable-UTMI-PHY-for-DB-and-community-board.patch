From c907bc351c331998e08ae0c16ddc73c66845d9e1 Mon Sep 17 00:00:00 2001
From: Evan Wang <xswang@marvell.com>
Date: Tue, 21 Mar 2017 15:55:32 +0800
Subject: [PATCH 0920/1345] dts: a3700: enable UTMI PHY for DB and community
 board

commit  0d94363bc87f107decd7bebd5ec951fe3d8a5df2 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

- For DB and community board, UTMI PHY is needed by USB2,
  then it is necessary to initialize UTMI PHY, so the
  patch enable it as default.

Change-Id: If9e01bded8c1cea1b3b958bd3cd46fe3b4dbd490
Signed-off-by: Evan Wang <xswang@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/37731
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Victor Gu <xigu@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/marvell/armada-3720-community.dts     |    8 ++++++++
 arch/arm64/boot/dts/marvell/armada-3720-db.dts     |   10 ++++++++++
 arch/arm64/boot/dts/marvell/armada-37xx.dtsi       |   16 ++++++++--------
 3 files changed, 26 insertions(+), 8 deletions(-)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-community.dts b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
index 7578073..2fe36c6 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-community.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
@@ -123,6 +123,14 @@
 				phy-names = "usb";
 			};
 
+			utmi_usb32: utmi@5d000 {
+				status = "okay";
+			};
+
+			utmi_usb2: utmi@5f000 {
+				status = "okay";
+			};
+
 			sdhci1: sdhci@d0000 {
 				wp-inverted;
 				bus-width = <4>;
diff --git a/arch/arm64/boot/dts/marvell/armada-3720-db.dts b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
index adc9876..294bc52 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-db.dts
@@ -105,16 +105,26 @@
 				phys = <&utmi_usb32>;
 				phy-names = "usb";
 			};
+
 			bm: bm@c0000 {
 				status = "okay";
 			};
+
 			bm_bppi: bm-bppi {
 				status = "okay";
 			};
+
 			reg_avs: avs@11500 {
 				status = "okay";
 			};
 
+			utmi_usb32: utmi@5d000 {
+				status = "okay";
+			};
+
+			utmi_usb2: utmi@5f000 {
+				status = "okay";
+			};
 		};
 
 		reg_sata: pwr-sata {
diff --git a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
index 976ccc2..48184b5 100644
--- a/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-37xx.dtsi
@@ -400,6 +400,14 @@
 				status = "disabled";
 			};
 
+			utmi_usb32: utmi@5d000 {
+				compatible = "marvell,armada-3700-utmi-phy";
+				reg = <0x5d000 0x1000>;
+				utmi-port = <UTMI_PHY_TO_USB3_HOST0>;
+				#phy-cells = <0>;
+				status = "disabled";
+			};
+
 			otg_phy: otg@5d800 {
 				compatible = "marvell,armada-3700-otg";
 				reg = <0x5d800 0x100>;
@@ -415,14 +423,6 @@
 				status = "disabled";
 			};
 
-			utmi_usb32: utmi@5d000 {
-				compatible = "marvell,armada-3700-utmi-phy";
-				reg = <0x5d000 0x1000>;
-				utmi-port = <UTMI_PHY_TO_USB3_HOST0>;
-				#phy-cells = <0>;
-				status = "disabled";
-			};
-
 			utmi_usb2: utmi@5f000 {
 				compatible = "marvell,armada-3700-utmi-phy";
 				reg = <0x5f000 0x1000>;
-- 
1.7.9.5


From aa0ec9451da112f636247f73bd0c72db13c171c6 Mon Sep 17 00:00:00 2001
From: Igal Liberman <igall@marvell.com>
Date: Mon, 20 Feb 2017 10:42:07 +0200
Subject: [PATCH 0791/1345] ARM: dts: a38x: enable cesa driver

commit  33b18f4f141a35125bb62c577563d534afb18603 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: Ifb0d9401b863ae04599433304ecd7e167bce1044
Signed-off-by: Igal Liberman <igall@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/36888
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Neta Zur Hershkovits <neta@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/armada-380-gp.dts       |    4 ++++
 arch/arm/boot/dts/armada-382-db.dts       |    2 +-
 arch/arm/boot/dts/armada-385-amc.dts      |    5 +++++
 arch/arm/boot/dts/armada-385-db-ap.dts    |    5 +++++
 arch/arm/boot/dts/armada-385-linksys.dtsi |    4 ++++
 arch/arm/boot/dts/armada-388-clearfog.dts |    4 ++++
 arch/arm/boot/dts/armada-388-db.dts       |    5 +++++
 arch/arm/boot/dts/armada-388-gp.dts       |    4 ++++
 arch/arm/boot/dts/armada-388-rd.dts       |    5 +++++
 arch/arm/boot/dts/armada-38x.dtsi         |    1 +
 10 files changed, 38 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/armada-380-gp.dts b/arch/arm/boot/dts/armada-380-gp.dts
index b630144..6508290 100644
--- a/arch/arm/boot/dts/armada-380-gp.dts
+++ b/arch/arm/boot/dts/armada-380-gp.dts
@@ -195,6 +195,10 @@
 				vcc-supply = <&reg_usb3_vbus>;
 				status = "okay";
 			};
+
+			crypto@90000 {
+				status = "okay";
+			};
 		};
 
 		pcie-controller {
diff --git a/arch/arm/boot/dts/armada-382-db.dts b/arch/arm/boot/dts/armada-382-db.dts
index bcf2624..393cccb 100644
--- a/arch/arm/boot/dts/armada-382-db.dts
+++ b/arch/arm/boot/dts/armada-382-db.dts
@@ -131,7 +131,7 @@
 				};
 			};
 
-			crypto@9D000 {
+			crypto@90000 {
 				status = "okay";
 			};
 
diff --git a/arch/arm/boot/dts/armada-385-amc.dts b/arch/arm/boot/dts/armada-385-amc.dts
index 4fdf324..9b845fe 100644
--- a/arch/arm/boot/dts/armada-385-amc.dts
+++ b/arch/arm/boot/dts/armada-385-amc.dts
@@ -139,6 +139,11 @@
 				};
 			};
 
+			crypto@90000 {
+				status = "okay";
+			};
+
+
 		};
 
 		pcie-controller {
diff --git a/arch/arm/boot/dts/armada-385-db-ap.dts b/arch/arm/boot/dts/armada-385-db-ap.dts
index 80c325d..6e11ccf 100644
--- a/arch/arm/boot/dts/armada-385-db-ap.dts
+++ b/arch/arm/boot/dts/armada-385-db-ap.dts
@@ -212,6 +212,11 @@
 				status = "okay";
 				usb-phy = <&usb3_phy>;
 			};
+
+			crypto@90000 {
+				status = "okay";
+			};
+
 		};
 
 		bm-bppi {
diff --git a/arch/arm/boot/dts/armada-385-linksys.dtsi b/arch/arm/boot/dts/armada-385-linksys.dtsi
index 2306c45..0e723b5 100644
--- a/arch/arm/boot/dts/armada-385-linksys.dtsi
+++ b/arch/arm/boot/dts/armada-385-linksys.dtsi
@@ -397,3 +397,7 @@
 &spi0 {
 	status = "disabled";
 };
+
+&cesa {
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/armada-388-clearfog.dts b/arch/arm/boot/dts/armada-388-clearfog.dts
index f1b032c..99c7780 100644
--- a/arch/arm/boot/dts/armada-388-clearfog.dts
+++ b/arch/arm/boot/dts/armada-388-clearfog.dts
@@ -304,3 +304,7 @@
 		spi-cpha;
 	};
 };
+
+&cesa {
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/armada-388-db.dts b/arch/arm/boot/dts/armada-388-db.dts
index a727131..7c04c9c 100644
--- a/arch/arm/boot/dts/armada-388-db.dts
+++ b/arch/arm/boot/dts/armada-388-db.dts
@@ -183,6 +183,11 @@
 			usb3@f8000 {
 				status = "okay";
 			};
+
+			crypto@90000 {
+				status = "okay";
+			};
+
 		};
 
 		bm-bppi {
diff --git a/arch/arm/boot/dts/armada-388-gp.dts b/arch/arm/boot/dts/armada-388-gp.dts
index 158c558..9c37741 100644
--- a/arch/arm/boot/dts/armada-388-gp.dts
+++ b/arch/arm/boot/dts/armada-388-gp.dts
@@ -243,6 +243,10 @@
 				usb-phy = <&usb3_phy>;
 				status = "okay";
 			};
+
+			crypto@90000 {
+				status = "okay";
+			};
 		};
 
 		bm-bppi {
diff --git a/arch/arm/boot/dts/armada-388-rd.dts b/arch/arm/boot/dts/armada-388-rd.dts
index af82f27..338e841 100644
--- a/arch/arm/boot/dts/armada-388-rd.dts
+++ b/arch/arm/boot/dts/armada-388-rd.dts
@@ -115,6 +115,11 @@
 			usb3@f0000 {
 				status = "okay";
 			};
+
+			crypto@90000 {
+				status = "okay";
+			};
+
 		};
 
 		pcie-controller {
diff --git a/arch/arm/boot/dts/armada-38x.dtsi b/arch/arm/boot/dts/armada-38x.dtsi
index 85a997c..c181ec0 100644
--- a/arch/arm/boot/dts/armada-38x.dtsi
+++ b/arch/arm/boot/dts/armada-38x.dtsi
@@ -548,6 +548,7 @@
 				marvell,crypto-srams = <&crypto_sram0>,
 						       <&crypto_sram1>;
 				marvell,crypto-sram-size = <0x800>;
+				status = "disabled";
 			};
 
 			rtc: rtc@a3800 {
-- 
1.7.9.5


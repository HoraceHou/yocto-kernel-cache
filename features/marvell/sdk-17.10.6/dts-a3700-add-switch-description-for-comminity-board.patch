From f93397897ca1e8d35a880204f1a829b6ebc5a941 Mon Sep 17 00:00:00 2001
From: Yelena <yelena@marvell.com>
Date: Mon, 7 Nov 2016 16:22:10 +0200
Subject: [PATCH 0576/1345] dts: a3700: add switch description for comminity
 board

commit  39c72478eb99011dda4dbe376c8f9dd11538ba7c from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: I77533b3e9ea66cb6233aedae6da2b4b0d85c0dfc
Signed-off-by: Yelena <yelena@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/33601
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Wilson Ding <dingwei@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/marvell/armada-3720-community.dts     |   62 ++++++++++++++++++++
 1 file changed, 62 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-3720-community.dts b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
index 61435e4..a3f7099 100644
--- a/arch/arm64/boot/dts/marvell/armada-3720-community.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3720-community.dts
@@ -81,6 +81,28 @@
 				};
 			};
 
+			mdio: mdio@32004 {
+				switch0: switch@0 {
+					compatible = "marvell,mv88e6085";
+					reg = <1>;
+
+					mdio@0 {
+						#address-cells = <1>;
+						#size-cells = <0>;
+
+						phy1: phy1@1 {
+							reg = <17>;
+						};
+						phy2: phy2@2 {
+							reg = <18>;
+						};
+						phy3: phy3@3 {
+							reg = <19>;
+						};
+					};
+				};
+			};
+
 			usb3@58000 {
 				status = "okay";
 			};
@@ -105,6 +127,46 @@
 			};
 		};
 	};
+	dsa@0 {
+		compatible = "marvell,dsa";
+		dsa,ethernet = <&eth0>;
+		dsa,mii-bus = <&mdio>;
+		#address-cells = <2>;
+		#size-cells = <0>;
+
+		switch@0 {
+				#address-cells = <1>;
+				#size-cells = <0>;
+				reg = <1 0>;
+
+				port@0 {
+						reg = <0>;
+						label = "cpu";
+						fixed-link {
+							speed = <1000>;
+							full-duplex;
+						};
+				};
+
+				port@1 {
+						reg = <1>;
+						label = "wan";
+						phy-handle = <&phy1>;
+				};
+
+				port@2 {
+						reg = <2>;
+						label = "lan0";
+						phy-handle = <&phy2>;
+				};
+
+				port@3 {
+						reg = <3>;
+						label = "lan1";
+						phy-handle = <&phy3>;
+				};
+		};
+	};
 };
 
 &pcie0 {
-- 
1.7.9.5


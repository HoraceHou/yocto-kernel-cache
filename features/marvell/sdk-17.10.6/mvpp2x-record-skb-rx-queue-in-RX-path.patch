From 0755e047afb2933e92c6d62d8f7b6a189438bb67 Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Thu, 22 Sep 2016 15:17:28 +0300
Subject: [PATCH 0518/1345] mvpp2x: record skb rx queue in RX path

commit  dba2d72959d32bbdcd024517e7fed1a95cc5cac7 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

- record queue_mapping in skb

Change-Id: If1b6e65d7b0530163867a8b5d430fd15ac154c72
Signed-off-by: Stefan Chulski <stefanc@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/33074
Reviewed-by: Yuval Caduri <cyuval@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Tested-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c |    1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
index 39f7ab71..809ec38 100644
--- a/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
+++ b/drivers/net/ethernet/marvell/mvpp2x/mv_pp2x_main.c
@@ -2343,6 +2343,7 @@ static int mv_pp2x_rx(struct mv_pp2x_port *port, struct napi_struct *napi,
 		skb_put(skb, rx_bytes);
 		skb->protocol = eth_type_trans(skb, dev);
 		mv_pp2x_rx_csum(port, rx_status, skb);
+		skb_record_rx_queue(skb, (u16)rxq->id);
 		mv_pp2x_set_skb_hash(rx_desc, rx_status, skb);
 
 		napi_gro_receive(napi, skb);
-- 
1.7.9.5


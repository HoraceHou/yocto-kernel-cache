From ff9940f85f87ed049c8acfea436400e8b579baeb Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Wed, 22 Jun 2016 08:59:05 +0300
Subject: [PATCH 0331/1345] dts: mvpp2x: add flow control base address to the
 armada-cp110.dtsi

commit  7500e3e7cba26fa76832df98fc356fc194600252 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

Change-Id: Ifcf5724e11bddf427ce79354bc22251edf507539
Signed-off-by: Stefan Chulski <stefanc@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/30649
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../devicetree/bindings/net/marvell-pp2x.txt       |    6 ++++--
 arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi    |    4 +++-
 arch/arm64/boot/dts/marvell/armada-cp110.dtsi      |    4 +++-
 3 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/Documentation/devicetree/bindings/net/marvell-pp2x.txt b/Documentation/devicetree/bindings/net/marvell-pp2x.txt
index 2dbc115..71c2904 100644
--- a/Documentation/devicetree/bindings/net/marvell-pp2x.txt
+++ b/Documentation/devicetree/bindings/net/marvell-pp2x.txt
@@ -10,7 +10,7 @@ ppv22 required properties:
   In addition, at least one port register set is required.
 - reg-names: names of used registers, must be "pp", "serdes", "xmib",
 	     "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs",
-	     "gmac", "xlg", "rfu1"
+	     "fca", "gmac", "xlg", "rfu1"
 - clocks: a pointer to the reference clocks for this device, consequently:
 	- ppv22 clock
 	- GOP clocks
@@ -85,10 +85,12 @@ ppv22@000000 {
 	      <0x12b000 0x1000>,  /* MG Internal regs */
 	      <0x130000 0x6000>, /* MSPG regs */
 	      <0x130400 0x200>,  /* MSPG - XPCS regs */
+	      <0x130600 0x200>,  /* FCA - flow control regs*/
 	      <0x130e00 0x100>,  /* MSPG - GMAC regs */
 	      <0x130f00 0x100>,  /* MSPG - XLG MAC regs */
 	      <0x441000 0x1000>;  /* RFU-1 Regs */
-	reg-names = "pp", "serdes", "xmib", "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs", "gmac", "xlg", "rfu1";
+	reg-names = "pp", "serdes", "xmib", "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs",
+		    "fca", "gmac", "xlg", "rfu1";
 	clocks = <&gateclk 3>, <&gateclk 18>, <&gateclk 9>, <&gateclk 6>, <&gateclk 5>;
 	clock-names = "pp_clk", "gop_core_clk", "gop_clk", "mg_core_clk", "mg_clk";
 	status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi
index d9956f6..20c0101 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110-1.dtsi
@@ -238,10 +238,12 @@ ppv22@000000 {
 	      <0x12b000 0x1000>,  /* MG Internal regs */
 	      <0x130000 0x6000>, /* MSPG regs */
 	      <0x130400 0x200>,  /* MSPG - XPCS regs */
+	      <0x130600 0x200>,  /* FCA - flow control regs*/
 	      <0x130e00 0x100>,  /* MSPG - GMAC regs */
 	      <0x130f00 0x100>,  /* MSPG - XLG MAC regs */
 	      <0x441000 0x1000>;  /* RFU-1 Regs */
-	reg-names = "pp", "serdes", "xmib", "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs", "gmac", "xlg", "rfu1";
+	reg-names = "pp", "serdes", "xmib", "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs",
+		    "fca", "gmac", "xlg", "rfu1";
 	clocks = <&gateclk 3>, <&gateclk 18>, <&gateclk 9>, <&gateclk 6>, <&gateclk 5>;
 	clock-names = "pp_clk", "gop_core_clk", "gop_clk", "mg_core_clk", "mg_clk";
 	status = "okay";
diff --git a/arch/arm64/boot/dts/marvell/armada-cp110.dtsi b/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
index 777f92b..83721b4 100644
--- a/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
+++ b/arch/arm64/boot/dts/marvell/armada-cp110.dtsi
@@ -312,10 +312,12 @@ ppv22@000000 {
 	      <0x12b000 0x1000>,  /* MG Internal regs */
 	      <0x130000 0x6000>, /* MSPG regs */
 	      <0x130400 0x200>,  /* MSPG - XPCS regs */
+	      <0x130600 0x200>,  /* FCA - flow control regs*/
 	      <0x130e00 0x100>,  /* MSPG - GMAC regs */
 	      <0x130f00 0x100>,  /* MSPG - XLG MAC regs */
 	      <0x441000 0x1000>;  /* RFU-1 Regs */
-	reg-names = "pp", "serdes", "xmib", "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs", "gmac", "xlg", "rfu1";
+	reg-names = "pp", "serdes", "xmib", "led", "smi", "tai", "xsmi", "mg", "mspg", "xpcs",
+		    "fca", "gmac", "xlg", "rfu1";
 	clocks = <&gateclk 3>, <&gateclk 18>, <&gateclk 9>, <&gateclk 6>, <&gateclk 5>;
 	clock-names = "pp_clk", "gop_core_clk", "gop_clk", "mg_core_clk", "mg_clk";
 	status = "okay";
-- 
1.7.9.5


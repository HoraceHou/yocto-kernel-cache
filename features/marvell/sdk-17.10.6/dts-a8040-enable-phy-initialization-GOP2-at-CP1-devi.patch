From 08e822076e3328c561cd78fe578efa67c5b61893 Mon Sep 17 00:00:00 2001
From: Stefan Chulski <stefanc@marvell.com>
Date: Sun, 30 Oct 2016 16:27:52 +0200
Subject: [PATCH 0561/1345] dts: a8040: enable phy initialization GOP2 at CP1
 device tree

commit  15f4ee85b81831f8c246c49126dba9d1069e3906 from
https://github.com/MarvellEmbeddedProcessors/linux-marvell.git

- add mdio node to CP1 device tree
- connect CP1 GOP2 port to the CP1 mdio
- to handle CP1 port phy, mdio controller driver should be
  configured in device tree

Change-Id: I94c726e99384cc3552b890e95f1a1fdc74a01e7f
Signed-off-by: Stefan Chulski <stefanc@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/33462
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/marvell/armada-8040-db-router.dts     |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts b/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts
index e763e2a..8169d38 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db-router.dts
@@ -124,13 +124,20 @@
 			sata@540000 {
 				status = "okay";
 			};
+			mdio@12a200 {
+				#address-cells = <1>;
+				#size-cells = <0>;
+				phy2_1: ethernet-phy@2 {
+					reg = <0>;
+				};
+			};
 			gop {
 				emac0_1: mac0 {
 					phy-mode = "kr"; /* lane-2 */
 				};
 				emac2_1: mac2 {
 					phy-mode = "rgmii"; /* rgmii-0 */
-					phy = <&phy2>;
+					phy = <&phy2_1>;
 				};
 				emac3_1: mac3 {
 					phy-mode = "sgmii"; /* lane-4 */
-- 
1.7.9.5


From 3e072c3f977ccc3a40dd06587f515d697ad02664 Mon Sep 17 00:00:00 2001
From: Jia Hongtao <hongtao.jia@freescale.com>
Date: Tue, 2 Feb 2016 17:49:07 +0800
Subject: [PATCH 272/666] thermal: qoriq: Update TMU node according to regmap
 interface

Two things updated on T102x/T104x/LS1021A platforms:
1. Add TMU endianness property.
2. Add SoC compatible string to indicate TMU sensor id.

Signed-off-by: Jia Hongtao <hongtao.jia@freescale.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/powerpc/boot/dts/fsl/t1023si-post.dtsi | 4 +++-
 arch/powerpc/boot/dts/fsl/t1040si-post.dtsi | 3 ++-
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/t1023si-post.dtsi b/arch/powerpc/boot/dts/fsl/t1023si-post.dtsi
index 642fd3d..07de58e 100644
--- a/arch/powerpc/boot/dts/fsl/t1023si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t1023si-post.dtsi
@@ -379,7 +379,7 @@
 	};
 
 	tmu: tmu@f0000 {
-		compatible = "fsl,qoriq-tmu";
+		compatible = "fsl,qoriq-tmu", "fsl,t102x-tmu";
 		reg = <0xf0000 0x1000>;
 		interrupts = <18 2 0 0>;
 		fsl,tmu-range = <0xb0000 0xa0026 0x80048 0x30061>;
@@ -422,6 +422,8 @@
 				       0x00030001 0x0000000d
 				       0x00030002 0x00000019
 				       0x00030003 0x00000024>;
+
+		little-endian;
 		#thermal-sensor-cells = <1>;
 	};
 
diff --git a/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi b/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi
index 2e3bf8c..282dd3f 100644
--- a/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi
@@ -497,7 +497,7 @@
 	};
 
 	tmu: tmu@f0000 {
-		compatible = "fsl,qoriq-tmu";
+		compatible = "fsl,qoriq-tmu", "fsl,t104x-tmu";
 		reg = <0xf0000 0x1000>;
 		interrupts = <18 2 0 0>;
 		fsl,tmu-range = <0xa0000 0x90026 0x8004a 0x1006a>;
@@ -536,6 +536,7 @@
 
 				       0x00030000 0x00000012
 				       0x00030001 0x0000001d>;
+		little-endian;
 		#thermal-sensor-cells = <1>;
 	};
 
-- 
2.7.4


From 327a2b432570ef637309ca4f78e64b3d3773e8c0 Mon Sep 17 00:00:00 2001
From: MengLi <meng.li@windriver.com>
Date: Thu, 12 Mar 2020 23:04:02 +0800
Subject: [PATCH] Revert "regulator: core: Release coupled_rdevs on
 regulator_init_coupling() error"

This reverts commit b890d9087a937af8add659a47962de6cf8d7f67e.

This patch is used to fix d8ca7d184b33 ("regulator: core:
Introduce API for regulators coupling customization") that doesn't
exist in wrlinux kernel, and cause booting issue.
So, revert it.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/regulator/core.c | 1 -
 1 file changed, 1 deletion(-)

diff --git a/drivers/regulator/core.c b/drivers/regulator/core.c
index 40abd7746f51..4c67a01a5f28 100644
--- a/drivers/regulator/core.c
+++ b/drivers/regulator/core.c
@@ -5029,7 +5029,6 @@ regulator_register(const struct regulator_desc *regulator_desc,
 	unset_regulator_supplies(rdev);
 	mutex_unlock(&regulator_list_mutex);
 wash:
-	kfree(rdev->coupling_desc.coupled_rdevs);
 	kfree(rdev->constraints);
 	mutex_lock(&regulator_list_mutex);
 	regulator_ena_gpio_free(rdev);
-- 
2.17.1


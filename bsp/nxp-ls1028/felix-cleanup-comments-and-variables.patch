From 7f7f7e1f9cae825a23c704dfabcfad4f02f4342f Mon Sep 17 00:00:00 2001
From: Catalin Horghidan <catalin.horghidan@nxp.com>
Date: Tue, 12 Feb 2019 15:34:06 +0200
Subject: [PATCH 637/706] felix: cleanup comments and variables

Signed-off-by: Catalin Horghidan <catalin.horghidan@nxp.com>
(cherry picked from commit 9962ad0a241bd2cfd1d5f5dffa10b563581e06e1)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/mscc/felix_board.c | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

diff --git a/drivers/net/ethernet/mscc/felix_board.c b/drivers/net/ethernet/mscc/felix_board.c
index 502d940c13c4..ea0b14848c6e 100644
--- a/drivers/net/ethernet/mscc/felix_board.c
+++ b/drivers/net/ethernet/mscc/felix_board.c
@@ -451,7 +451,6 @@ static int felix_ports_init(struct pci_dev *pdev)
 
 	for_each_available_child_of_node(np, portnp) {
 		struct ocelot_port *ocelot_port;
-		struct net_device *port_dev;
 
 		if (!portnp || !portnp->name ||
 		    of_node_cmp(portnp->name, "port") ||
@@ -489,7 +488,6 @@ static int felix_ports_init(struct pci_dev *pdev)
 				continue;
 			}
 			phydev = of_phy_find_device(portnp);
-			/* TODO: check if FL phy require phy_start */
 		} else {
 			phydev = of_phy_find_device(phy_node);
 		}
@@ -501,8 +499,6 @@ static int felix_ports_init(struct pci_dev *pdev)
 
 		phy_attached_info(phydev);
 
-
-		/* TODO: probe only if its not CPU port */
 		err = ocelot_probe_port(ocelot, port, port_regs, phydev);
 		if (err) {
 			dev_err(ocelot->dev, "failed to probe ports\n");
@@ -511,15 +507,15 @@ static int felix_ports_init(struct pci_dev *pdev)
 
 		/* apply felix config */
 		ocelot_port = ocelot->ports[port];
-		port_dev = ocelot_port->dev;
 
 		felix_setup_port_mac(ocelot_port);
 		if (ndev)
 			felix_setup_port_inj(ocelot_port, ndev);
 
 #ifdef CONFIG_MSCC_FELIX_SWITCH_TSN
-		tsn_port_register(port_dev, (struct tsn_ops *)&switch_tsn_ops,
-				(u16)pdev->bus->number + GROUP_OFFSET_SWITCH);
+		tsn_port_register(ocelot_port->dev,
+				  (struct tsn_ops *)&switch_tsn_ops,
+				  (u16)pdev->bus->number + GROUP_OFFSET_SWITCH);
 #endif
 	}
 	/* set port for external CPU frame extraction/injection */
-- 
2.17.1


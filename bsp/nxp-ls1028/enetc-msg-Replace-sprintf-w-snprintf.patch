From 4a311e13242bf438630774a3e5ffce8b550746b1 Mon Sep 17 00:00:00 2001
From: Claudiu Manoil <claudiu.manoil@nxp.com>
Date: Tue, 20 Nov 2018 16:16:56 +0200
Subject: [PATCH 487/706] enetc: msg: Replace sprintf w/ snprintf

Signed-off-by: Claudiu Manoil <claudiu.manoil@nxp.com>
(cherry picked from commit 62a86087672f67089e116f162ba260051e2cd8c9)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/freescale/enetc/enetc_msg.c | 3 ++-
 drivers/net/ethernet/freescale/enetc/enetc_pf.h  | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/enetc/enetc_msg.c b/drivers/net/ethernet/freescale/enetc/enetc_msg.c
index 71e0cf2db9c8..b013a3e47c9d 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_msg.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_msg.c
@@ -110,7 +110,8 @@ int enetc_msg_psi_init(struct enetc_pf *pf)
 	int vector, i, err;
 
 	/* register message passing interrupt handler */
-	sprintf(pf->msg_int_name, "%s-vfmsg", si->ndev->name);
+	snprintf(pf->msg_int_name, sizeof(pf->msg_int_name), "%s-vfmsg",
+		 si->ndev->name);
 	vector = pci_irq_vector(si->pdev, ENETC_SI_INT_IDX);
 	err = request_irq(vector, enetc_msg_psi_msix, 0, pf->msg_int_name, si);
 	if (err) {
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_pf.h b/drivers/net/ethernet/freescale/enetc/enetc_pf.h
index 9449eb67dd23..60129438f693 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_pf.h
+++ b/drivers/net/ethernet/freescale/enetc/enetc_pf.h
@@ -37,7 +37,7 @@ struct enetc_pf {
 
 	struct enetc_msg_swbd rxmsg[ENETC_MAX_NUM_VFS];
 	struct work_struct msg_task;
-	char msg_int_name[IFNAMSIZ + 8];
+	char msg_int_name[ENETC_INT_NAME_MAX];
 
 	char vlan_promisc_simap; /* bitmap of SIs in VLAN promisc mode */
 	DECLARE_BITMAP(vlan_ht_filter, ENETC_VLAN_HT_SIZE);
-- 
2.17.1


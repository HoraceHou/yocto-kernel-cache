From 281a80676da2dcd4180b4c8086cf112608ae58c4 Mon Sep 17 00:00:00 2001
From: Catalin Horghidan <catalin.horghidan@nxp.com>
Date: Wed, 19 Dec 2018 16:12:04 +0200
Subject: [PATCH 422/706] felix: fix pr_info in case of Generic PHY

Signed-off-by: Catalin Horghidan <catalin.horghidan@nxp.com>
(cherry picked from commit 7e4cb9a5e85f68c3c088615f69262dd9a72e4d7b)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/mscc/felix_board.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/mscc/felix_board.c b/drivers/net/ethernet/mscc/felix_board.c
index d1a9952edbd7..4658c1512996 100644
--- a/drivers/net/ethernet/mscc/felix_board.c
+++ b/drivers/net/ethernet/mscc/felix_board.c
@@ -321,8 +321,8 @@ static void felix_release_ports(struct ocelot_port **ports)
 			continue;
 
 		pr_info("%s: port:%d %s\n", __func__, i,
-			phy_is_pseudo_fixed_link(phydev)
-			? "fixed-link" : phydev->drv->name);
+			phy_is_pseudo_fixed_link(phydev) ? "fixed-link" :
+			(phydev->drv ? phydev->drv->name : "Generic PHY"));
 
 		unregister_netdev(ports[i]->dev);
 		free_netdev(ports[i]->dev);
@@ -418,8 +418,8 @@ static int felix_ports_init(struct ocelot *ocelot)
 		phy_node = NULL;
 
 		pr_info("%s: port:%d %s\n", __func__, port,
-			phy_is_pseudo_fixed_link(phydev)
-			? "fixed-link" : phydev->drv->name);
+			phy_is_pseudo_fixed_link(phydev) ? "fixed-link" :
+			(phydev->drv ? phydev->drv->name : "Generic PHY"));
 
 		/* expected frame format */
 		if (port == FELIX_EXT_CPU_PORT_ID)
-- 
2.17.1


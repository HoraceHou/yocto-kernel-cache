From 10518ba5ef3dc0db3e52c840474bd02be5fc9fa6 Mon Sep 17 00:00:00 2001
From: Claudiu Manoil <claudiu.manoil@nxp.com>
Date: Tue, 23 Oct 2018 18:04:07 +0300
Subject: [PATCH 458/706] enetc: Remove debug instrumentation (skb print)

Signed-off-by: Claudiu Manoil <claudiu.manoil@nxp.com>
(cherry picked from commit f0d1dbf8214cb9946d1c80958ca2e105faa7a812)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/freescale/enetc/enetc.c  | 28 -------------------
 drivers/net/ethernet/freescale/enetc/enetc.h  |  3 --
 .../net/ethernet/freescale/enetc/enetc_vf.c   |  3 --
 3 files changed, 34 deletions(-)

diff --git a/drivers/net/ethernet/freescale/enetc/enetc.c b/drivers/net/ethernet/freescale/enetc/enetc.c
index d5d37acd4d7e..37f0de751e54 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc.c
@@ -20,27 +20,6 @@ static void enetc_process_skb(struct enetc_bdr *rx_ring, struct sk_buff *skb);
 static int enetc_clean_rx_ring(struct enetc_bdr *rx_ring,
 			       struct napi_struct *napi, int work_limit);
 
-unsigned int debug;
-
-static void enetc_dbg_print_skb(struct sk_buff *skb, int type)
-{
-	char *c = skb->data;
-	int i;
-
-	netdev_info(skb->dev, "\n[DBG] %s skb->data: %p, len: %d\n",
-		(type == RX) ? "RX" : "TX", skb->data, skb->len);
-
-	for (i = 0; i < skb->len; i++) {
-		if (i % 32 == 0)
-			pr_info("%02d: ", i / 32);
-		pr_cont("%02X%s", *c++, ((i + 1) % 4 == 0) ? " " : "");
-	}
-	if (skb_vlan_tag_present(skb))
-		pr_info("VLAN tag %04x\n", skb_vlan_tag_get(skb));
-
-	pr_info("\n");
-}
-
 static irqreturn_t enetc_msix(int irq, void *data)
 {
 	struct enetc_int_vector	*v = data;
@@ -236,8 +215,6 @@ static int enetc_map_tx_buffs(struct enetc_bdr *tx_ring, struct sk_buff *skb,
 	enetc_bdr_idx_inc(tx_ring, &i);
 	tx_ring->next_to_use = i;
 
-	if (debug)
-		enetc_dbg_print_skb(skb, TX);
 	/* let H/W know BD ring has been updated */
 	enetc_wr_reg(tx_ring->tpir, i); /* includes wmb() */
 
@@ -621,11 +598,6 @@ static int enetc_clean_rx_ring(struct enetc_bdr *rx_ring,
 
 		rx_byte_cnt += skb->len;
 
-		if (debug) {
-			skb->dev = rx_ring->ndev;
-			enetc_dbg_print_skb(skb, RX);
-		}
-
 		enetc_process_skb(rx_ring, skb);
 
 		napi_gro_receive(napi, skb);
diff --git a/drivers/net/ethernet/freescale/enetc/enetc.h b/drivers/net/ethernet/freescale/enetc/enetc.h
index b95690accc42..0c3ef9ca2304 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.h
+++ b/drivers/net/ethernet/freescale/enetc/enetc.h
@@ -278,6 +278,3 @@ void enetc_tsn_pf_deinit(struct net_device *netdev);
 /* PTP driver exports */
 #define ENETC_PHC_INDEX_DEFAULT	-1
 extern int enetc_phc_index;
-
-/* common PF and VF module params */
-extern unsigned int debug;
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_vf.c b/drivers/net/ethernet/freescale/enetc/enetc_vf.c
index 4fe2692523e6..1e586fcf7e37 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_vf.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_vf.c
@@ -13,9 +13,6 @@ static const char enetc_drv_ver[] = ENETC_DRV_VER_STR;
 #define ENETC_DRV_NAME_STR "ENETC VF driver"
 static const char enetc_drv_name[] = ENETC_DRV_NAME_STR;
 
-/* VF driver params */
-module_param(debug, uint, 0000);
-
 /* Messaging */
 static void enetc_msg_vsi_write_msg(struct enetc_hw *hw,
 				    struct enetc_msg_swbd *msg)
-- 
2.17.1


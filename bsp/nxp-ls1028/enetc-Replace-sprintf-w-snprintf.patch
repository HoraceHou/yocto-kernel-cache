From 018cc0efb68f5b500c1ab2fc7f28b981ad806f33 Mon Sep 17 00:00:00 2001
From: Claudiu Manoil <claudiu.manoil@nxp.com>
Date: Tue, 20 Nov 2018 16:15:32 +0200
Subject: [PATCH 485/706] enetc: Replace sprintf w/ snprintf

Signed-off-by: Claudiu Manoil <claudiu.manoil@nxp.com>
(cherry picked from commit 39a034a3959c10ae82f9aee1ca76fe7339bb81f9)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/freescale/enetc/enetc.c | 3 ++-
 drivers/net/ethernet/freescale/enetc/enetc.h | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/enetc/enetc.c b/drivers/net/ethernet/freescale/enetc/enetc.c
index e1025aeae508..fae54ef0a637 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc.c
@@ -1211,7 +1211,8 @@ static int enetc_setup_irqs(struct enetc_ndev_priv *priv)
 		int entry = ENETC_BDR_INT_BASE_IDX + i;
 		struct enetc_hw *hw = &priv->si->hw;
 
-		sprintf(v->name, "%s-rxtx%d", priv->ndev->name, i);
+		snprintf(v->name, sizeof(v->name), "%s-rxtx%d",
+			 priv->ndev->name, i);
 		err = request_irq(irq, enetc_msix, 0, v->name, v);
 		if (err) {
 			dev_err(priv->dev, "request_irq() failed!\n");
diff --git a/drivers/net/ethernet/freescale/enetc/enetc.h b/drivers/net/ethernet/freescale/enetc/enetc.h
index 5b34e7d11f5e..94399bce60e0 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.h
+++ b/drivers/net/ethernet/freescale/enetc/enetc.h
@@ -173,6 +173,7 @@ static inline bool enetc_si_is_pf(struct enetc_si *si)
 }
 
 #define ENETC_MAX_NUM_TXQS	8
+#define ENETC_INT_NAME_MAX	(IFNAMSIZ + 8)
 
 struct enetc_int_vector {
 	void __iomem *rbier;
@@ -180,7 +181,7 @@ struct enetc_int_vector {
 	unsigned long tx_rings_map;
 	int count_tx_rings;
 	struct napi_struct napi;
-	char name[IFNAMSIZ + 8];
+	char name[ENETC_INT_NAME_MAX];
 
 	struct enetc_bdr rx_ring ____cacheline_aligned_in_smp;
 	struct enetc_bdr tx_ring[0];
-- 
2.17.1


From c2075a9094dc4e20eac0019a8d65b8fef7e28d02 Mon Sep 17 00:00:00 2001
From: Claudiu Manoil <claudiu.manoil@nxp.com>
Date: Wed, 1 Nov 2017 17:26:07 +0200
Subject: [PATCH 074/706] enetc: Set skb queue_mapping to the correct Rx ring
 index

Fixes: 503f426 ("enetc: Add MSI-X and multi-queue support")

Signed-off-by: Claudiu Manoil <claudiu.manoil@nxp.com>
(cherry picked from commit 4017a69decba465a6760ef0013c16c9608dc3337)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/freescale/enetc/enetc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/enetc/enetc.c b/drivers/net/ethernet/freescale/enetc/enetc.c
index 85436c101b4e..d7886e3ecdfe 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc.c
@@ -511,7 +511,7 @@ static void enetc_add_rx_buff_to_skb(struct enetc_bdr *rx_ring, int i,
 static void enetc_process_skb(struct enetc_bdr *rx_ring,
 			      struct sk_buff *skb)
 {
-	skb_record_rx_queue(skb, 0); // TODO: use queue_idx for multi-queue
+	skb_record_rx_queue(skb, rx_ring->index);
 	skb->protocol = eth_type_trans(skb, rx_ring->ndev);
 }
 
-- 
2.17.1


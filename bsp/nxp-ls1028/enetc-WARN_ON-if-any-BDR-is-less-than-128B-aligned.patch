From 5fc1cdc34c29df26a6934ee24f5b9317eacaa958 Mon Sep 17 00:00:00 2001
From: Claudiu Manoil <claudiu.manoil@nxp.com>
Date: Mon, 19 Mar 2018 11:15:05 +0200
Subject: [PATCH 117/706] enetc: WARN_ON if any BDR is less than 128B aligned

Signed-off-by: Claudiu Manoil <claudiu.manoil@nxp.com>
(cherry picked from commit fafda41b7a325f4adab4758542aeb7c7a59c3de7)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/freescale/enetc/enetc.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/net/ethernet/freescale/enetc/enetc.c b/drivers/net/ethernet/freescale/enetc/enetc.c
index 3ac50e2b7c03..b12ce045e1e2 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc.c
@@ -871,7 +871,7 @@ static void enetc_free_cbdr(struct device *dev, struct enetc_cbdr *cbdr)
 
 static void enetc_setup_cbdr(struct enetc_hw *hw, struct enetc_cbdr *cbdr)
 {
-	WARN_ON(lower_32_bits(cbdr->bd_dma_base) & 0x3f);
+	WARN_ON(lower_32_bits(cbdr->bd_dma_base) & 0x7f);
 
 	enetc_wr(hw, ENETC_SICBDRBAR0, lower_32_bits(cbdr->bd_dma_base));
 	enetc_wr(hw, ENETC_SICBDRBAR1, upper_32_bits(cbdr->bd_dma_base));
@@ -942,7 +942,7 @@ static void enetc_setup_txbdr(struct enetc_hw *hw, struct enetc_bdr *tx_ring)
 	u32 tbmr;
 
 	/* 128B alignment required */
-	WARN_ON(lower_32_bits(tx_ring->bd_dma_base) & 0x3f);
+	WARN_ON(lower_32_bits(tx_ring->bd_dma_base) & 0x7f);
 
 	enetc_txbdr_wr(hw, idx, ENETC_TBBAR0,
 		       lower_32_bits(tx_ring->bd_dma_base));
@@ -979,7 +979,7 @@ static void enetc_setup_rxbdr(struct enetc_hw *hw, struct enetc_bdr *rx_ring)
 	u32 rbmr;
 
 	/* 128B alignment required */
-	WARN_ON(lower_32_bits(rx_ring->bd_dma_base) & 0x3f);
+	WARN_ON(lower_32_bits(rx_ring->bd_dma_base) & 0x7f);
 
 	enetc_rxbdr_wr(hw, idx, ENETC_RBBAR0,
 		       lower_32_bits(rx_ring->bd_dma_base));
-- 
2.17.1


From 02d76a050d6dad71a35f9c476db24076eb4ffa83 Mon Sep 17 00:00:00 2001
From: Catalin Horghidan <catalin.horghidan@nxp.com>
Date: Mon, 17 Dec 2018 11:51:09 +0200
Subject: [PATCH 417/706] ocelot: fix drop when port is vlan aware

Signed-off-by: Catalin Horghidan <catalin.horghidan@nxp.com>
(cherry picked from commit 0eac233c22cec9a0aedea4c65faac6c109474cbf)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/mscc/ocelot.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/mscc/ocelot.c b/drivers/net/ethernet/mscc/ocelot.c
index 9ba594705a13..a8feb56f2b35 100644
--- a/drivers/net/ethernet/mscc/ocelot.c
+++ b/drivers/net/ethernet/mscc/ocelot.c
@@ -198,7 +198,7 @@ static void ocelot_vlan_port_apply(struct ocelot *ocelot,
 
 	/* Drop frames with multicast source address */
 	val = ANA_PORT_DROP_CFG_DROP_MC_SMAC_ENA;
-	if (port->vlan_aware && !port->vid)
+	if (port->vlan_aware && !port->pvid)
 		/* If port is vlan-aware and tagged, drop untagged and priority
 		 * tagged frames.
 		 */
-- 
2.17.1


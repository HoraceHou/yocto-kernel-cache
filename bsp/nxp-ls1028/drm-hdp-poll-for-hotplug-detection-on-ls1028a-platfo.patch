From 713e80b73187d4f8700adb4aa9abb17975fd4892 Mon Sep 17 00:00:00 2001
From: Wen He <wen.he_1@nxp.com>
Date: Mon, 18 Mar 2019 11:42:01 +0800
Subject: [PATCH 669/706] drm: hdp: poll for hotplug detection on ls1028a
 platform

Signed-off-by: Jiafei Pan <Jiafei.Pan@nxp.com>
(cherry picked from commit b7939baa33d8b40cd75cf86e7824744aa55e157b)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/imx/hdp/imx-hdp.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/drivers/gpu/drm/imx/hdp/imx-hdp.c b/drivers/gpu/drm/imx/hdp/imx-hdp.c
index 497a085b4271..0232d53ed132 100644
--- a/drivers/gpu/drm/imx/hdp/imx-hdp.c
+++ b/drivers/gpu/drm/imx/hdp/imx-hdp.c
@@ -1337,6 +1337,11 @@ static int imx_hdp_imx_bind(struct device *dev, struct device *master,
 
 	encoder->bridge = bridge;
 
+#ifdef CONFIG_ARCH_LAYERSCAPE
+	/* There is no interrupt for hotplug on ls1028a platform */
+	connector->polled = DRM_CONNECTOR_POLL_CONNECT |
+		DRM_CONNECTOR_POLL_DISCONNECT;
+#endif
 	/* connector */
 	drm_connector_helper_add(connector,
 				 &imx_hdp_connector_helper_funcs);
-- 
2.17.1


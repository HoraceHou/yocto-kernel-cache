From 4b9a31ffd8649d3f387262052f4e8c8b877b64bf Mon Sep 17 00:00:00 2001
From: Sojiro Kusunoki <sojiro.kusunoki.zj@ps.hitachi-solutions.com>
Date: Thu, 13 Sep 2018 19:23:19 +0900
Subject: [PATCH 626/909] arm64: dts: r8a7795-es1: Add definition for
 vspm/vsp2drifer

commit 5392a720176e3bbf3095a639e440fba086b7678e from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git

This patch replace the definition for vsp1 for vspm/vsp2driver

Signed-off-by: Sojiro Kusunoki <sojiro.kusunoki.zj@ps.hitachi-solutions.com>
Signed-off-by: Koji Matsuoka <koji.matsuoka.xm@renesas.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/renesas/r8a7795-es1.dtsi | 97 ++++++++++++--------
 1 file changed, 58 insertions(+), 39 deletions(-)

diff --git a/arch/arm64/boot/dts/renesas/r8a7795-es1.dtsi b/arch/arm64/boot/dts/renesas/r8a7795-es1.dtsi
index 0fb84c219b2f..bd4af636997f 100644
--- a/arch/arm64/boot/dts/renesas/r8a7795-es1.dtsi
+++ b/arch/arm64/boot/dts/renesas/r8a7795-es1.dtsi
@@ -46,33 +46,62 @@
 	/delete-node/ dma-controller@e6460000;
 	/delete-node/ dma-controller@e6470000;
 
-	fcpf2: fcp@fe952000 {
-		compatible = "renesas,fcpf";
-		reg = <0 0xfe952000 0 0x200>;
-		clocks = <&cpg CPG_MOD 613>;
-		power-domains = <&sysc R8A7795_PD_A3VP>;
-		resets = <&cpg 613>;
-		iommus = <&ipmmu_vp0 2>;
+	vspm@fe920000 {
+		renesas,#rpf_clut = <4>;
+		/delete-property/ renesas,#start_reservation;
+		/delete-property/ renesas,#burst_access;
 	};
 
-	vspi2: vsp@fe9c0000 {
-		compatible = "renesas,vsp2";
-		reg = <0 0xfe9c0000 0 0x8000>;
-		interrupts = <GIC_SPI 446 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&cpg CPG_MOD 629>;
-		power-domains = <&sysc R8A7795_PD_A3VP>;
-		resets = <&cpg 629>;
+	vspm@fe960000 {
+		renesas,#rpf_clut = <4>;
+		/delete-property/ renesas,#start_reservation;
+		/delete-property/ renesas,#burst_access;
+	};
 
-		renesas,fcp = <&fcpvi2>;
+	vspm@fe9a0000 {
+		/delete-property/ renesas,#start_reservation;
 	};
 
-	fcpvi2: fcp@fe9cf000 {
-		compatible = "renesas,fcpv";
-		reg = <0 0xfe9cf000 0 0x200>;
-		clocks = <&cpg CPG_MOD 609>;
+	vspm@fe9b0000 {
+		/delete-property/ renesas,#start_reservation;
+	};
+
+	vsp@fe9c0000 {
+		compatible = "renesas,vspm-vsp2";
+		reg = <0 0xfe9c0000 0 0x8000>;
+		renesas,has-lut;
+		renesas,has-clu;
+		renesas,has-hgo;
+		renesas,has-hgt;
+		renesas,#rpf = <1>;
+		renesas,#uds = <1>;
+		renesas,#wpf = <1>;
+	};
+
+	vspi2: vspm@fe9c0000 {
+		compatible = "renesas,vspm";
+		reg = <0 0xfe9c0000 0 0x8000>, <0 0xfe9cf000 0 0x200>;
+		interrupts = <GIC_SPI 446 IRQ_TYPE_LEVEL_HIGH>;
+		clocks = <&cpg CPG_MOD 629>, <&cpg CPG_MOD 609>;
+		clock-names = "vsp", "fcp";
+		renesas,#ch = <2>;
+		renesas,#rpf = <1>;
+		renesas,#rpf_clut = <1>;
+		renesas,#wpf_rot = <1>;
+		renesas,has-sru;
+		renesas,has-uds;
+		renesas,has-lut;
+		renesas,has-clu;
+		renesas,has-hst;
+		renesas,has-hsi;
+		renesas,has-hgo;
+		renesas,has-hgt;
+		renesas,has-shp;
+		renesas,#read_outstanding = <2>;
 		power-domains = <&sysc R8A7795_PD_A3VP>;
-		resets = <&cpg 609>;
-		iommus = <&ipmmu_vp0 10>;
+		resets = <&cpg 629>, <&cpg 609>;
+		reset-names = "vsp", "fcp";
+		status = "disabled";
 	};
 
 	vspd3: vsp@fea38000 {
@@ -95,14 +124,16 @@
 		iommus = <&ipmmu_vi0 11>;
 	};
 
-	fdp1@fe948000 {
-		compatible = "renesas,fdp1";
-		reg = <0 0xfe948000 0 0x2400>;
+	fdp2: fdpm@fe948000 {
+		compatible = "renesas,fdpm";
+		reg = <0 0xfe948000 0 0x2400>, <0 0xfe952000 0 0x200>;
 		interrupts = <GIC_SPI 264 IRQ_TYPE_LEVEL_HIGH>;
-		clocks = <&cpg CPG_MOD 117>;
+		clocks = <&cpg CPG_MOD 117>, <&cpg CPG_MOD 613>;
+		clock-names = "fdp", "fcp";
 		power-domains = <&sysc R8A7795_PD_A3VP>;
-		resets = <&cpg 117>;
-		renesas,fcp = <&fcpf2>;
+		resets = <&cpg 117>, <&cpg 613>;
+		reset-names = "fdp", "fcp";
+		renesas,#ch = <2>;
 	};
 
 	csi21: csi2@fea90000 {
@@ -207,18 +238,6 @@
 	       <&ipmmu_mp1 30>, <&ipmmu_mp1 31>;
 };
 
-&fcpvb1 {
-	iommus = <&ipmmu_vp0 7>;
-};
-
-&fcpf1 {
-	iommus = <&ipmmu_vp0 1>;
-};
-
-&fcpvi1 {
-	iommus = <&ipmmu_vp0 9>;
-};
-
 &fcpvd2 {
 	iommus = <&ipmmu_vi0 10>;
 };
-- 
2.17.1


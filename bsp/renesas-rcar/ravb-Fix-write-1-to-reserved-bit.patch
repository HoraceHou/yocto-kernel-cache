From fb24f5d7267b2ade8f3d346fef055011404138af Mon Sep 17 00:00:00 2001
From: Kazuya Mizuguchi <kazuya.mizuguchi.ks@renesas.com>
Date: Thu, 14 Dec 2017 15:52:11 +0900
Subject: [PATCH 193/909] ravb: Fix write 1 to reserved bit

commit f4fdde00e769215a55660d884f5dddc6993588ea from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git

This patch fixes writing 1 to reserved bit.
The write value should be 0.

Signed-off-by: Kazuya Mizuguchi <kazuya.mizuguchi.ks@renesas.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/net/ethernet/renesas/ravb_ptp.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/renesas/ravb_ptp.c b/drivers/net/ethernet/renesas/ravb_ptp.c
index 95678c2cbcf0..658479d2b04a 100644
--- a/drivers/net/ethernet/renesas/ravb_ptp.c
+++ b/drivers/net/ethernet/renesas/ravb_ptp.c
@@ -312,7 +312,7 @@ irqreturn_t ravb_ptp_interrupt(struct net_device *ndev)
 		ptp_clock_event(priv->ptp.clock, &event);
 
 		result = IRQ_HANDLED;
-		ravb_write(ndev, ~GIS_PTCF, GIS);
+		ravb_write(ndev, ~(GIS_PTCF | GIS_RESERVED), GIS);
 	}
 	if (gis & GIS_PTMF) {
 		struct ravb_ptp_perout *perout = priv->ptp.perout;
@@ -323,7 +323,7 @@ irqreturn_t ravb_ptp_interrupt(struct net_device *ndev)
 		}
 
 		result = IRQ_HANDLED;
-		ravb_write(ndev, ~GIS_PTMF, GIS);
+		ravb_write(ndev, ~(GIS_PTMF | GIS_RESERVED), GIS);
 	}
 
 	return result;
-- 
2.17.1


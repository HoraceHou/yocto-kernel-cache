From 31153be43b7cc654f9aeda77343259b3abb417ad Mon Sep 17 00:00:00 2001
From: Dien Pham <dien.pham.ry@rvc.renesas.com>
Date: Fri, 27 May 2016 19:31:30 +0700
Subject: [PATCH 025/909] soc: renesas: rcar-sysc: Adjust the waiting time to
 cover the worst case

commit 836bed5b82dbafe4235e290d744efc2096cf34ba from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git

[dien.pham.ry: Update wait time for turning multiple domains on-off]

As description in HWM rev0.51E, 9.4 Usage notes, page 455:
	"It takes several hundreds of microseconds to shutting off and
	resuming power domain. Because actual time required
	for shutting off and resuming depends on the status of on-board
	power line, shutoff/resume time is not guaranteed by
	electrical specification.
	"
	So, the safe value of waiting is about 1000us.

And number of non-CPU power domains is 10, so in the worst case,
the total waiting time is 10*1000us.

This patch adjust the waiting time to cover for the worst case.

Signed-off-by: Dien Pham <dien.pham.ry@rvc.renesas.com>
(cherry picked from commit 6e3e12d9c12a40d4ca465afe19c64bc6f9eb7de3)
Signed-off-by: Takeshi Kihara <takeshi.kihara.df@renesas.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/soc/renesas/rcar-sysc.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/drivers/soc/renesas/rcar-sysc.c b/drivers/soc/renesas/rcar-sysc.c
index 50d03d8b4f9a..b09bd0fcb8f4 100644
--- a/drivers/soc/renesas/rcar-sysc.c
+++ b/drivers/soc/renesas/rcar-sysc.c
@@ -47,14 +47,14 @@
 #define PWRER_OFFS		0x14	/* Power Shutoff/Resume Error */
 
 
-#define SYSCSR_RETRIES		100
-#define SYSCSR_DELAY_US		1
+#define SYSCSR_RETRIES		1000
+#define SYSCSR_DELAY_US		10
 
-#define PWRER_RETRIES		100
-#define PWRER_DELAY_US		1
+#define PWRER_RETRIES		1000
+#define PWRER_DELAY_US		10
 
 #define SYSCISR_RETRIES		1000
-#define SYSCISR_DELAY_US	1
+#define SYSCISR_DELAY_US	10
 
 #define RCAR_PD_ALWAYS_ON	32	/* Always-on power area */
 
-- 
2.17.1


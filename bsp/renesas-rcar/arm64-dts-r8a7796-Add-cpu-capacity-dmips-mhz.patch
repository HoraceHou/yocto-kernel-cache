From 48da8330e7a5134fec2dc44626ee189514753f47 Mon Sep 17 00:00:00 2001
From: Gaku Inami <gaku.inami.xw@bp.renesas.com>
Date: Fri, 24 Mar 2017 19:56:34 +0900
Subject: [PATCH 550/909] arm64: dts: r8a7796: Add cpu capacity-dmips-mhz

commit 6cb8f68eb1dece1ac119beea58bb09f8ea2a9313 from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git

Set the capacity-dmips-mhz for R-CAR M3, that is based on dhrystone.

Expected cpu capacity:
Cortex-A57: 1024, Cortex-A53: 434

Note:
The cpu capacity in Cortex-A53 side is scaled with max cpufreq
in current implementation.

543 * 1.2[GHz]/1.5[GHz] = 434

Therefore, it needs to set "543" to capacity-dmips-mhz in dt
if it uses cpu capacity with "434" on Cortex-A53.

Signed-off-by: Gaku Inami <gaku.inami.xw@bp.renesas.com>
Signed-off-by: Takeshi Kihara <takeshi.kihara.df@renesas.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/renesas/r8a7796.dtsi | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/arm64/boot/dts/renesas/r8a7796.dtsi b/arch/arm64/boot/dts/renesas/r8a7796.dtsi
index 50722ae09a80..1025e608c6a3 100644
--- a/arch/arm64/boot/dts/renesas/r8a7796.dtsi
+++ b/arch/arm64/boot/dts/renesas/r8a7796.dtsi
@@ -455,6 +455,7 @@
 				<&cluster0_opp5>, <&cluster0_opp6>,
 				<&cluster0_opp7>;
 			#cooling-cells = <2>;
+			capacity-dmips-mhz = <1024>;
 		};
 
 		a57_1: cpu@1 {
@@ -472,6 +473,7 @@
 				<&cluster0_opp5>, <&cluster0_opp6>,
 				<&cluster0_opp7>;
 			#cooling-cells = <2>;
+			capacity-dmips-mhz = <1024>;
 		};
 
 		a53_0: cpu@100 {
@@ -484,6 +486,7 @@
 			cpu-idle-states = <&CPU_SLEEP_1>;
 			clocks = <&cpg CPG_CORE R8A7796_CLK_Z2>;
 			operating-points-v2 = <&cluster1_opp>;
+			capacity-dmips-mhz = <543>;
 		};
 
 		a53_1: cpu@101 {
@@ -496,6 +499,7 @@
 			cpu-idle-states = <&CPU_SLEEP_1>;
 			clocks = <&cpg CPG_CORE R8A7796_CLK_Z2>;
 			operating-points-v2 = <&cluster1_opp>;
+			capacity-dmips-mhz = <543>;
 		};
 
 		a53_2: cpu@102 {
@@ -508,6 +512,7 @@
 			cpu-idle-states = <&CPU_SLEEP_1>;
 			clocks = <&cpg CPG_CORE R8A7796_CLK_Z2>;
 			operating-points-v2 = <&cluster1_opp>;
+			capacity-dmips-mhz = <543>;
 		};
 
 		a53_3: cpu@103 {
@@ -520,6 +525,7 @@
 			cpu-idle-states = <&CPU_SLEEP_1>;
 			clocks = <&cpg CPG_CORE R8A7796_CLK_Z2>;
 			operating-points-v2 = <&cluster1_opp>;
+			capacity-dmips-mhz = <543>;
 		};
 
 		L2_CA57: cache-controller-0 {
-- 
2.17.1


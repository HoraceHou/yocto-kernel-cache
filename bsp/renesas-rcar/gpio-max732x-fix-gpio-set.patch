From a870e311325525c4b25be8db7b3f2954ba788df6 Mon Sep 17 00:00:00 2001
From: Vladimir Barinov <vladimir.barinov@cogentembedded.com>
Date: Tue, 11 Apr 2017 20:12:56 +0300
Subject: [PATCH 805/909] gpio: max732x: fix gpio set

commit d3dd821694e6e2a99089bb4916ba4013de54c503 from
https://github.com/CogentEmbedded/meta-rcar.git

gpio set value/direction must 0 or 1, but
gpiolib sets it to not binary values

Signed-off-by: Vladimir Barinov <vladimir.barinov@cogentembedded.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/gpio/gpio-max732x.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpio/gpio-max732x.c b/drivers/gpio/gpio-max732x.c
index 9d8bcc69f245..755a4fe867ab 100644
--- a/drivers/gpio/gpio-max732x.c
+++ b/drivers/gpio/gpio-max732x.c
@@ -237,7 +237,7 @@ static void max732x_gpio_set_value(struct gpio_chip *gc, unsigned off, int val)
 	unsigned base = off & ~0x7;
 	uint8_t mask = 1u << (off & 0x7);
 
-	max732x_gpio_set_mask(gc, base, mask, val << (off & 0x7));
+	max732x_gpio_set_mask(gc, base, mask, (!!val) << (off & 0x7));
 }
 
 static void max732x_gpio_set_multiple(struct gpio_chip *gc,
-- 
2.17.1


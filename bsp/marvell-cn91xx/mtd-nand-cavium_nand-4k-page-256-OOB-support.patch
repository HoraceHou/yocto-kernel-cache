From 8237cccaee143375946c81cdd8d85028b922b780 Mon Sep 17 00:00:00 2001
From: Peter Swain <pswain@cavium.com>
Date: Tue, 6 Feb 2018 15:30:12 -0800
Subject: [PATCH 0009/1051] mtd: nand: cavium_nand 4k page + 256 OOB support

Expanding Cavium NFC controller page size to 4096,
with 256 bytes OOB, to support Micron MT29F808GABA.

Not yet tested on real nand-flash with 4k pages,
but this change leaves behavior on
smaller devices correct, and should work.

This should probably be specified in devtree as
         nand-ecc-mode = "soft";
         nand-ecc-algo = "bch";
         nand-ecc-size = "1024";
         nand-ecc-strength = "7";
because until Linux-4.12 brings in support for
Micron on-die ECC, the soft BCH should be used

Signed-off-by: Peter Swain <pswain@cavium.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/mtd/nand/raw/cavium_nand.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/mtd/nand/raw/cavium_nand.c b/drivers/mtd/nand/raw/cavium_nand.c
index 908ea7e181b8..bfa822071724 100644
--- a/drivers/mtd/nand/raw/cavium_nand.c
+++ b/drivers/mtd/nand/raw/cavium_nand.c
@@ -250,8 +250,8 @@ union ndf_cmd {
 #define NDF_ST_REG_MAIN_SM	GENMASK_ULL(2, 0) /* Main SM states */
 
 #define MAX_NAND_NAME_LEN	64
-#define NAND_MAX_PAGESIZE	2048
-#define NAND_MAX_OOBSIZE	64
+#define NAND_MAX_PAGESIZE	4096
+#define NAND_MAX_OOBSIZE	256
 
 /* NAND chip related information */
 struct cvm_nand_chip {
-- 
2.17.1


From 9ab7023f604a67ac4d7e1a734bf16f24170d54f6 Mon Sep 17 00:00:00 2001
From: Antoine Tenart <antoine.tenart@bootlin.com>
Date: Mon, 24 Sep 2018 14:44:20 +0200
Subject: [PATCH 0737/1051] arch: arm64: dts: marvell: 88x2110 support

Change-Id: I64f4e9fda912b8bfcc21b14db1a5c9becaaaf7c2
Signed-off-by: Antoine Tenart <antoine.tenart@bootlin.com>
Signed-off-by: Konstantin Porotchkin <kostap@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/60547
Tested-by: iSoC Platform CI <ykjenk@marvell.com>
Reviewed-by: Igal Liberman <igall@marvell.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../boot/dts/marvell/armada-3900-db-vd-A.dts  | 44 +++++++++++++++++++
 .../boot/dts/marvell/armada-3900-db-vd-B.dts  | 43 ++++++++++++++++++
 2 files changed, 87 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-3900-db-vd-A.dts b/arch/arm64/boot/dts/marvell/armada-3900-db-vd-A.dts
index 28398eb96ca2..58b9b29a90bf 100644
--- a/arch/arm64/boot/dts/marvell/armada-3900-db-vd-A.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3900-db-vd-A.dts
@@ -56,6 +56,11 @@
 	chosen {
 		stdout-path = "serial0:115200n8";
 	};
+
+	aliases {
+		ethernet0 = &cp0_eth0;
+		ethernet1 = &cp0_eth1;
+	};
 };
 
 &uart0 {
@@ -106,5 +111,44 @@
 	status = "okay";
 };
 
+&cp0_mdio {
+	status = "okay";
+};
+
+&cp0_xmdio {
+	status = "okay";
+
+	phy0: ethernet-phy@0 {
+		compatible = "ethernet-phy-ieee802.3-c45";
+		reg = <0>;
+		enet-phy-lane-swap;
+	};
+
+	phy1: ethernet-phy@1 {
+		compatible = "ethernet-phy-ieee802.3-c45";
+		reg = <1>;
+		enet-phy-lane-swap;
+	};
+};
+
+&cp0_ethernet {
+	status = "okay";
+};
 
+&cp0_eth0 {
+	status = "okay";
+	/* Network PHY */
+	phy = <&phy0>;
+	phy-mode = "10gbase-kr";
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp0_comphy2 0>;
+};
 
+&cp0_eth1 {
+	status = "okay";
+	/* Network PHY */
+	phy = <&phy1>;
+	phy-mode = "10gbase-kr";
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp0_comphy4 1>;
+};
diff --git a/arch/arm64/boot/dts/marvell/armada-3900-db-vd-B.dts b/arch/arm64/boot/dts/marvell/armada-3900-db-vd-B.dts
index 06a08275fee8..a96bc08d52ba 100644
--- a/arch/arm64/boot/dts/marvell/armada-3900-db-vd-B.dts
+++ b/arch/arm64/boot/dts/marvell/armada-3900-db-vd-B.dts
@@ -57,6 +57,10 @@
 		stdout-path = "serial0:115200n8";
 	};
 
+	aliases {
+		ethernet0 = &cp0_eth0;
+		ethernet1 = &cp0_eth1;
+	};
 };
 
 &uart0 {
@@ -107,5 +111,44 @@
 	status = "okay";
 };
 
+&cp0_mdio {
+	status = "okay";
+};
+
+&cp0_xmdio {
+	status = "okay";
 
+	phy0: ethernet-phy@0 {
+		compatible = "ethernet-phy-ieee802.3-c45";
+		reg = <0>;
+		enet-phy-lane-swap;
+	};
+
+	phy1: ethernet-phy@1 {
+		compatible = "ethernet-phy-ieee802.3-c45";
+		reg = <1>;
+		enet-phy-lane-swap;
+	};
+};
 
+&cp0_ethernet {
+	status = "okay";
+};
+
+&cp0_eth0 {
+	status = "okay";
+	/* Network PHY */
+	phy = <&phy0>;
+	phy-mode = "10gbase-kr";
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp0_comphy2 0>;
+};
+
+&cp0_eth1 {
+	status = "okay";
+	/* Network PHY */
+	phy = <&phy1>;
+	phy-mode = "sgmii";
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp0_comphy4 1>;
+};
-- 
2.17.1


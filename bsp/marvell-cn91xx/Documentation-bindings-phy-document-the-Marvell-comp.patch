From 6e0972dc8c520c86094b7bf24afe40725205c857 Mon Sep 17 00:00:00 2001
From: Grzegorz Jaszczyk <jaz@semihalf.com>
Date: Fri, 7 Sep 2018 15:34:42 +0200
Subject: [PATCH 0692/1051] Documentation/bindings: phy: document the Marvell
 comphy-a3700 driver

The Marvell Armada 37xx SoCs contains a hardware block called COMPHY
that provides a number of shared PHYs used by various interfaces in the
SoC: network, SATA, PCIe and USB3.0. This Device Tree binding allows to
describe this COMPHY hardware block.

Change-Id: I035f7666e71b40bb4e59f761ddd9c3ee4475449b
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../bindings/phy/phy-mvebu-comphy.txt         | 47 ++++++++++++++++---
 1 file changed, 41 insertions(+), 6 deletions(-)

diff --git a/Documentation/devicetree/bindings/phy/phy-mvebu-comphy.txt b/Documentation/devicetree/bindings/phy/phy-mvebu-comphy.txt
index 25af39d73e1d..70bcbee38547 100644
--- a/Documentation/devicetree/bindings/phy/phy-mvebu-comphy.txt
+++ b/Documentation/devicetree/bindings/phy/phy-mvebu-comphy.txt
@@ -1,17 +1,25 @@
 mvebu comphy driver
 -------------------
 
-A comphy controller can be found on Marvell Armada 7k/8k on the CP110. It
-provides a number of shared PHYs used by various interfaces (network, sata,
-usb, PCIe...).
+A comphy controller can be found on Marvell Armada 7k/8k on the CP110 or on
+Marvell Armada 37xx SoC. It provides a number of shared PHYs used by various
+interfaces (network, SATA, USB, PCIe...).
 
 Required properties:
 
-- compatible: should be "marvell,comphy-cp110"
+- compatible: should be one of:
+	"marvell,comphy-cp110"
+	"marvell,comphy-a3700"
 - reg: should contain the comphy register location and length.
+       In case of "comphy-a3700" address space is divided into four ranges:
+       - South Bridge PHY Configuration Registers
+       - PCIe and GbE 0 PHY Registers
+       - USB3 and GbE 1 PHY Registers
+       - AHCI vendor specific indirect Registers
 - reg-names: must contain names corresponding to the comphy register ranges.
 - marvell,system-controller: should contain a phandle to the
-                             system controller node.
+			     system controller node (not relevant for
+			     "comphy-a3700").
 - #address-cells: should be 1.
 - #size-cells: should be 0.
 
@@ -23,7 +31,7 @@ Required properties (child nodes):
 - #phy-cells : from the generic phy bindings, must be 1. Defines the
                input port to use for a given comphy lane.
 
-Example:
+Example for marvell,comphy-cp110:
 
 	CP110_LABEL(comphy): phy@120000 {
 		compatible = "marvell,comphy-cp110";
@@ -43,3 +51,30 @@ Example:
 			#phy-cells = <1>;
 		};
 	};
+
+Example for marvell,comphy-a3700:
+
+	a3700_comphy: comphy@18300 {
+		compatible = "marvell,comphy-a3700";
+		reg = <0x18300 0x300>, <0x1f000 0x1000>,
+		      <0x5c000 0x1000>, <0xe0178 0x8>;
+		reg-names = "comphy", "serdes",
+			    "usb3_gbe1_phy", "indirect_ahci";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		a3700_comphy0: phy@0 {
+			reg = <0>;
+			#phy-cells = <1>;
+		};
+
+		a3700_comphy1: phy@1 {
+			reg = <1>;
+			#phy-cells = <1>;
+		};
+
+		a3700_comphy2: phy@2 {
+			reg = <2>;
+			#phy-cells = <1>;
+		};
+	};
-- 
2.17.1


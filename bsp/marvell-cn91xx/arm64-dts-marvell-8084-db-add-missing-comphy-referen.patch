From c8f5129bb0e7ea44fa4ffb97f9f765932aaf867e Mon Sep 17 00:00:00 2001
From: Grzegorz Jaszczyk <jaz@semihalf.com>
Date: Mon, 7 May 2018 14:17:05 +0200
Subject: [PATCH 0615/1051] arm64: dts: marvell: 8084-db: add missing comphy
 references

Adding phandle to particular nodes will allow relevant drivers to configure
appropriate marvell, comphy-cp110 accordingly.

Change-Id: Ia5f47a20f3072fa074b79532d37f4bf2c68b2def
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../arm64/boot/dts/marvell/armada-8084-db.dts | 22 +++++++++++++++++++
 1 file changed, 22 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-8084-db.dts b/arch/arm64/boot/dts/marvell/armada-8084-db.dts
index e01f80a57ad3..fbb3647d51c0 100644
--- a/arch/arm64/boot/dts/marvell/armada-8084-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8084-db.dts
@@ -82,12 +82,21 @@
 	sata-port@1 {
 		reg = <1>;
 		status = "okay";
+		/* Generic PHY, providing serdes lanes */
+		phys = <&cp0_comphy5 1>;
 	};
 };
 
 &cp0_pcie0 {
 	status = "okay";
 	msi-parent =<&ap0_gic_its>;
+
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp0_comphy0 0
+		&cp0_comphy1 0
+		&cp0_comphy2 0
+		&cp0_comphy3 0>;
+	phy-names = "pcie-phy0", "pcie-phy1", "pcie-phy2", "pcie-phy3";
 };
 
 &cp0_pcie1 {
@@ -103,12 +112,21 @@
 	sata-port@1 {
 		reg = <1>;
 		status = "okay";
+		/* Generic PHY, providing serdes lanes */
+		phys = <&cp1_comphy5 1>;
 	};
 };
 
 &cp1_pcie0 {
 	status = "okay";
 	msi-parent =<&ap0_gic_its>;
+
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp1_comphy0 0
+		&cp1_comphy1 0
+		&cp1_comphy2 0
+		&cp1_comphy3 0>;
+	phy-names = "pcie-phy0", "pcie-phy1", "pcie-phy2", "pcie-phy3";
 };
 
 &cp1_pcie1 {
@@ -124,6 +142,8 @@
 	sata-port@1 {
 		reg = <1>;
 		status = "okay";
+		/* Generic PHY, providing serdes lanes */
+		phys = <&cp2_comphy5 1>;
 	};
 };
 
@@ -155,6 +175,8 @@
 	sata-port@1 {
 		reg = <1>;
 		status = "okay";
+		/* Generic PHY, providing serdes lanes */
+		phys = <&cp3_comphy5 1>;
 	};
 };
 
-- 
2.17.1


From 81282f6afdedc30a856c2e02d52e878bb9375b0b Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Wed, 30 Jan 2019 15:43:53 +0200
Subject: [PATCH 0927/1051] doc: mvebu: port missing docs from previous kernels

Change-Id: I2fe2fe80f725e674b3582487790b5f36bf9bec55
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: https://sj1git1.cavium.com/2998
Tested-by: sa_ip-sw-jenkins
Reviewed-by: Nadav Haklai <Nadav.Haklai@cavium.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../mvebu/a37xx/armada-3720-db-setup.txt      |  66 ++++++++
 Documentation/mvebu/build_guide.txt           |  35 ++++
 Documentation/mvebu/porting_guide.txt         | 154 ++++++++++++++++++
 Documentation/mvebu/user_guide.txt            |  10 ++
 4 files changed, 265 insertions(+)
 create mode 100644 Documentation/mvebu/a37xx/armada-3720-db-setup.txt
 create mode 100644 Documentation/mvebu/build_guide.txt
 create mode 100644 Documentation/mvebu/porting_guide.txt
 create mode 100644 Documentation/mvebu/user_guide.txt

diff --git a/Documentation/mvebu/a37xx/armada-3720-db-setup.txt b/Documentation/mvebu/a37xx/armada-3720-db-setup.txt
new file mode 100644
index 000000000000..f0ca456c66c5
--- /dev/null
+++ b/Documentation/mvebu/a37xx/armada-3720-db-setup.txt
@@ -0,0 +1,66 @@
+Armada-3720 Development Board
+=============================
+
+The Armada-3720 Development Board (DB) is a configurable board designed to test
+several combinations of SOC configurations.
+linux supports a defined set of those configurations via different device tree files.
+
+This document describes the board modifications required to setup each configuration and the
+interfaces supported (or disabled in each one).
+
+To switch board configuration:
+1. Modify HW board settings according to the instructions in the "Board Setup Options" section below.
+2. Use appropriate Device Tree file for booting Linux.
+3. Same Device Tree selection is required also in U-Boot (to initialize requested comphy SerDes lanes).
+
+Board Setup Options
+-------------------
+
++---------------+---------------------------------------+---------------------------------------+---------------------------------------+
+| Connector	| Setup-A: Default			| Setup-B: SGMII1			| Setup-C: SGMII1-SFP2.5G		|
++===============+=======================================+=======================================+=======================================+
+| CON8		| eMMC_NAND module 	(SLM1506-v1)	| eMMC_NAND module 	(SLM1506-v1)	| eMMC_NAND module 	(SLM1506-v1)	|
++---------------+---------------------------------------+---------------------------------------+---------------------------------------+
+| CON15		| SDcard module		(SLM1505-v1)	| SDcard module		(SLM1505-v1)	| SDcard module		(SLM1505-v1)	|
++---------------+---------------------------------------+---------------------------------------+---------------------------------------+
+| CON17(PCIe)	| PCIe-mPCIe-Jumper: SLM-1496(Optional*)| PCIe-mPCIe-Jumper: SLM-1496(Optional*)| PCIe-mPCIe-Jumper: SLM-1496(Optional*)|
++---------------+---------------------------------------+---------------------------------------+---------------------------------------+
+| CON19		| SerDes-Jumper 	(SLM1502-v1)	| 88E1512 Module 	(SLM-1496-v1)	| 88F3720-2xSFP Module 	(SLM-1504-v1)	|
++---------------+---------------------------------------+---------------------------------------+---------------------------------------+
+| CON21		| 88E1512 Module 	(SLM-1496-v1)	| 88E1512 Module 	(SLM-1496-v1)	| 88E1512 Module 	(SLM-1496-v1)	|
++---------------+---------------------------------------+---------------------------------------+---------------------------------------+
+
+  * PCIe-mPCIe-Jumper is used to enable mini PCIe0 port (CON12)
+
+The table below summarizes the interface configuration of each setup.
+
++---------------+-------------------------------+-----------------------+-------------------------------+
+| DB File	| armada-3720-db-A		| armada-3720-db-B	| armada-3720-db-C		|
++===============+===============================+=======================+===============================+
+| Interface	| Setup-A: Default		| Setup-B: SGMII1	| Setup-C: SGMII1-SFP2.5G	|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| SerDes PHY0	| USB3_H0			| SGMII1		| SGMII1-SFP2.5G		|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| SerDes PHY1	| PCIe0				| PCIe0			| PCIe0				|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| SerDes PHY2	| SATA				| SATA			| SATA				|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| SATA		| CON6				| CON6			| CON6				|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| PCIe		| CON12/17			| CON12/17		| CON12/17			|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| USB3		| CON13				| N/A			| N/A				|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| SGMII1	| N/A				| PHY1 (CON19)		| PHY1 (CON19)			|
++---------------+-------------------------------+-----------------------+-------------------------------+
+| RGMII		| PHY0 (CON21)			| PHY0 (CON21)		| PHY0 (CON21)			|
++---------------+-------------------------------+-----------------------+-------------------------------+
+
+GPIOS:
+	- NB GPIO 14: Wake from system suspend state
+	- NB GPIO 11: SATA LED blink
+	- SB GPIO 2: Wake from system suspend state
+
+Notes:
+	- The armada-3720-db-A.dts is still named armada-3720-db.dts.
+	  Because the armada-3720-db.dts is mainlined, the name must be kept.
diff --git a/Documentation/mvebu/build_guide.txt b/Documentation/mvebu/build_guide.txt
new file mode 100644
index 000000000000..ad0f113f9936
--- /dev/null
+++ b/Documentation/mvebu/build_guide.txt
@@ -0,0 +1,35 @@
+Kernel Build Instructions
+=========================
+
+ARMv8 Platforms
+---------------
+
+Follow the following sequence to build ARMv8 platforms::
+
+	> export CROSS_COMPILE=<path/to/cross/compiler/>
+	  (Path to gcc compiler, without the gcc suffix. e.g. CROSS_COMPILE=/my_compilers/gcc-5.2/bin/aarch64-marvell-linux-gnu-)
+	> export ARCH=arm64
+	> make marvell_v8_sdk_defconfig
+	> make - for build kernel image and device tree images.
+
+- Linux image is under: 'arch/arm64/boot/Image'.
+- Device tree images are generated under: 'arch/arm64/boot/dts/marvell'.
+
+
+ARMv7 Platforms
+---------------
+
+Follow the following sequence to build ARMv7 platforms::
+
+	> export CROSS_COMPILE=<path/to/cross/compiler/>
+	  (Path to gcc compiler, without the gcc suffix. e.g. CROSS_COMPILE=/my_compilers/gcc-5.2/bin/aarch64-marvell-linux-gnu-)
+	> export ARCH=arm
+	> make mvebu_v7_lsp_defconfig
+	> make - for build kernel image and device tree images.
+	> make zImage - for build kernel image
+
+
+- Linux image is under: 'arch/arm/boot/zImage'.
+- Device tree images are generated under: 'arch/arm/boot/dts'.
+
+
diff --git a/Documentation/mvebu/porting_guide.txt b/Documentation/mvebu/porting_guide.txt
new file mode 100644
index 000000000000..4d5ae2ef4c80
--- /dev/null
+++ b/Documentation/mvebu/porting_guide.txt
@@ -0,0 +1,154 @@
+Kernel Porting Guide
+====================
+
+This document provides instructions for porting Marvell Linux package to a customer's board.
+
+Relevant Devices
+----------------
+	- Armada-80x0
+	- Armada-70x0
+	- Armada-37x0
+	- Armada-38x
+
+Introduction
+------------
+The device-tree includes runtime configuration for the Linux Kernel.
+In addition, the device-tree enables passing configuration parameters to drivers.
+
+For general information about the device-tree please refer to:
+http://elinux.org/Device_Tree
+
+
+Device-Tree Files
+-----------------
+Marvell's device-tree files are located in the following locations:
+- arch/arm64/boot/dts/marvell for 64-bit devices (A37x0, A80x0 and A70x0)
+- arch/arm/boot/dts for 32-bit devices (A38x and A39x).
+
+Marvell device-trees consists of 2 types of file:
+	- ``*.dtsi`` -	These files represents the SoC. Each available interface
+			has a node which holds the SoC information.
+	- ``*.dts``  -	These files holds the configuration of the board itself,
+			enabling/disabling nodes from SoCs, adding board information
+			to each node (if required).
+
+Porting Procedure
+-----------------
+	1. Choose one of the existing device tree for Marvell boards (for the SoC in use):
+
+		Copy the selected file, change the name and place the file in the correct folder, for example:
+		- arch/arm64/boot/dts/marvell/armada-8040-<new_name>.dts
+		- arch/arm/boot/dts/armada-38x-<new_name>.dts
+
+	2. Add the new device-tree file to the corresponding Makefile:
+		- arch/arm64/boot/dts/marvell/Makefile (A80x0, A70x0, A37x0)
+		- arch/arm/boot/dts/Makefile		 (A38x, A39x)
+
+		For example: ``dtb-$(CONFIG_ARCH_MVEBU) += armada-8040-<new_name>.dtb``
+
+	3. Look for "UPDATE" comments in the device tree and update board specific information:
+		- Model: "Customer board model"
+		- Compatible: "customer-board-compatible"
+		- Memory size: Update "memory" node properties
+		- MPPs: pinctrl-0 = <handle>
+		- PHY addresses for network nodes
+		- COMPHY handles for network nodes
+		- SPI flash (if needed)
+		- I2c devices (if needed)
+
+
+Device-Tree Bindings
+--------------------
+In order to make the porting of the drivers easier, each Linux driver
+has a device tree binding document which explains the usage of the driver.
+All binding documents are located in: Documentation/devicetree/bindings.
+
+The tables below list the binding documents for Marvell's drivers.
+
+Common Drivers
+~~~~~~~~~~~~~~
+	+---------------------------------------+-----------------------------------------------+
+	| Driver				| Binding file					|
+	+=======================================+===============================================+
+	| Marvell SATA driver			| ata/ahci-platform.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| USB xHCI controller			| usb/usb-xhci.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| USB device controller			| usb/marvell-u3d.txt, usb/marvell-udc.txt	|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell Xenon SDHCI driver		| mmc/marvell,xenon-sdhci.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell MDIO ethernet driver		| net/marvell-orion-mdio.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell PCIe driver			| pci/armada8k-pcie.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell eHCI driver			| usb/ehci-orion.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell XOR engines driver		| dma/mv-xor.txt				|
+	+---------------------------------------+-----------------------------------------------+
+
+A80x0/A70x0
+~~~~~~~~~~~
+	+---------------------------------------+-----------------------------------------------+
+	| Driver				| Binding file					|
+	+=======================================+===============================================+
+	| Marvell A80x0/A70x0 Pinctrl driver	| pinctrl/marvell,armada-ap806-pinctrl.txt	|
+	|					|						|
+	|					| pinctrl/marvell,armada-cp110-pinctrl.txt	|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell Comphy driver			| phy/phy-mvebu-comphy.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell Telephony driver		| telephony/mvebu-phone.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell PPv2x ethernet driver		| net/marvell-pp2x.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell EIP197 security driver	| crypto/mv_eip197.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell AP806 CPU Clock Driver	| clock/mvebu-armada-ap806-cpu-clock.txt	|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell SPI driver			| spi/spi-orion.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell I2c driver			| i2c/i2c-mv64xxx.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell EIP197 crypto driver		| crypto/inside_secure_eip.txt			|
+	+---------------------------------------+-----------------------------------------------+
+
+A37x0
+~~~~~
+	+---------------------------------------+-----------------------------------------------+
+	| Driver				| Binding file					|
+	+=======================================+===============================================+
+	| Marvell A37x0 Pinctrl driver		| pinctrl/marvell,armada-3700-pinctrl.txt	|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell Neta Ethernet controller	| net/marvell-armada-370-neta.txt		|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 i2c driver		| i2c/i2c-pxa.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 SPI driver		| spi/spi-armada-3700.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 UART driver		| tty/serial/mvebu-uart.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 Clock driver		| clock/mvebu-armada3700-clock.txt		|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 GPIO driver		| gpio/gpio-armada-3700.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 PCIe driver		| pci/aardvark-pci.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell A37x0 USB OTG PHY driver	| usb/armada3700-otg-phy.txt			|
+	+---------------------------------------+-----------------------------------------------+
+
+A38x
+~~~~
+	+---------------------------------------+-----------------------------------------------+
+	| Driver				| Binding file					|
+	+=======================================+===============================================+
+	| Marvell A38x Pinctrl driver		| pinctrl/marvell,armada-38x-pinctrl.txt	|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell Telephony driver		| telephony/mvebu-phone.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell Neta Ethernet controller	| marvell-armada-370-neta.txt			|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell SPI driver			| spi/spi-orion.txt				|
+	+---------------------------------------+-----------------------------------------------+
+	| Marvell I2c driver			| i2c/i2c-mv64xxx.txt				|
+	+---------------------------------------+-----------------------------------------------+
diff --git a/Documentation/mvebu/user_guide.txt b/Documentation/mvebu/user_guide.txt
new file mode 100644
index 000000000000..2eb8550f8780
--- /dev/null
+++ b/Documentation/mvebu/user_guide.txt
@@ -0,0 +1,10 @@
+Driver's guide for Marvell LSP
+==============================
+
+	Driver			| Kernel infrastructure		| Documentation location
+	------------------------|-------------------------------|-------------------------------------------------------
+	Comphy			| Generic PHY framework		| Documentation/phy.txt
+	mv_xor, mv_xor2		| DMA Engine			| Documentation/dmaengine/00-INDEX
+	Telephony		| Marvell proprietary		| drivers/telephony/mvebu_phone/telephony_user_guide.txt
+	cpufreq			| generic cpufreq-dt		| Documentation/cpu-freq/user-guide.txt
+	EIP197			| Kernel crypto API		| drivers/crypto/inside-secure/user-guide.txt
-- 
2.17.1


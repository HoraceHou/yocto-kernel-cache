From 0f700d7e269a2e7e43873cd5359dacf9d27eb3e3 Mon Sep 17 00:00:00 2001
From: Grzegorz Jaszczyk <jaz@semihalf.com>
Date: Wed, 18 Apr 2018 11:47:02 +0200
Subject: [PATCH 0591/1051] arm64: dts: marvell: 8040-db: add comphy references
 to PCIe ports

Adding phandles to the PCIe port will allow PCIe driver to configure
appropriate phys (Marvell comphys) accordingly.

Change-Id: I9627fea2838256bf21d58fc3a8144c1c5a08eb0e
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-8040-db.dts | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-8040-db.dts b/arch/arm64/boot/dts/marvell/armada-8040-db.dts
index 5cf097a4764a..9d40aa676c33 100644
--- a/arch/arm64/boot/dts/marvell/armada-8040-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8040-db.dts
@@ -123,11 +123,15 @@
 /* CON6 on CP0 expansion */
 &cp0_pcie0 {
 	status = "okay";
+	phys = <&cp0_comphy0 0>;
+	phy-names = "pcie-phy0";
 };
 
 /* CON5 on CP0 expansion */
 &cp0_pcie2 {
 	status = "okay";
+	phys = <&cp0_comphy5 2>;
+	phy-names = "pcie-phy0";
 };
 
 &cp0_i2c0 {
@@ -201,16 +205,22 @@
 /* CON6 on CP1 expansion */
 &cp1_pcie0 {
 	status = "okay";
+	phys = <&cp1_comphy0 0>;
+	phy-names = "pcie-phy0";
 };
 
 /* CON7 on CP1 expansion */
 &cp1_pcie1 {
 	status = "okay";
+	phys = <&cp1_comphy4 1>;
+	phy-names = "pcie-phy0";
 };
 
 /* CON5 on CP1 expansion */
 &cp1_pcie2 {
 	status = "okay";
+	phys = <&cp1_comphy5 2>;
+	phy-names = "pcie-phy0";
 };
 
 &cp1_i2c0 {
-- 
2.17.1


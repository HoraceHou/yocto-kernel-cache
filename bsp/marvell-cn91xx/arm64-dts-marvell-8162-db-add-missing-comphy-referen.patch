From a37c03e4c06b675945c348c3aee7f28c8143d7f6 Mon Sep 17 00:00:00 2001
From: Grzegorz Jaszczyk <jaz@semihalf.com>
Date: Mon, 7 May 2018 14:17:05 +0200
Subject: [PATCH 0616/1051] arm64: dts: marvell: 8162-db: add missing comphy
 references

Adding phandle to particular nodes will allow relevant drivers to configure
appropriate marvell, comphy-cp110 accordingly.

Change-Id: I90196db793f22411a219430b6eac728ecfd6f808
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
[Kevin: The original patch got from Marvell sdk10.0_19.06]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm64/boot/dts/marvell/armada-8162-db.dts | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/arch/arm64/boot/dts/marvell/armada-8162-db.dts b/arch/arm64/boot/dts/marvell/armada-8162-db.dts
index a33ff0b575d6..51562e91e434 100644
--- a/arch/arm64/boot/dts/marvell/armada-8162-db.dts
+++ b/arch/arm64/boot/dts/marvell/armada-8162-db.dts
@@ -74,12 +74,21 @@
 	sata-port@1 {
 		reg = <1>;
 		status = "okay";
+		/* Generic PHY, providing serdes lanes */
+		phys = <&cp0_comphy5 1>;
 	};
 };
 
 &cp0_pcie0 {
 	status = "okay";
 	msi-parent = <&ap0_gic_its>;
+
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp0_comphy0 0
+		&cp0_comphy1 0
+		&cp0_comphy2 0
+		&cp0_comphy3 0>;
+	phy-names = "pcie-phy0", "pcie-phy1", "pcie-phy2", "pcie-phy3";
 };
 
 &cp0_pcie1 {
@@ -95,12 +104,20 @@
 	sata-port@1 {
 		reg = <1>;
 		status = "okay";
+		/* Generic PHY, providing serdes lanes */
+		phys = <&cp4_comphy5 1>;
 	};
 };
 
 &cp4_pcie0 {
 	status = "okay";
 	msi-parent = <&ap1_gic_its>;
+	/* Generic PHY, providing serdes lanes */
+	phys = <&cp4_comphy0 0
+		&cp4_comphy1 0
+		&cp4_comphy2 0
+		&cp4_comphy3 0>;
+	phy-names = "pcie-phy0", "pcie-phy1", "pcie-phy2", "pcie-phy3";
 };
 
 &cp4_pcie1 {
-- 
2.17.1


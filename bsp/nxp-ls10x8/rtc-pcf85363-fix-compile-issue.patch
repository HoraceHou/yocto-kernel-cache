From f32fbff9f800572cb1b346ac543fb34ab7171d5f Mon Sep 17 00:00:00 2001
From: Zhao Qiang <qiang.zhao@nxp.com>
Date: Thu, 29 Aug 2019 16:05:43 +0800
Subject: [PATCH 042/245] rtc: pcf85363: fix compile issue

commit b9d5fbc1944338e387b94a3e5b4ad469f0085711 from
http://source.codeaurora.org/external/qoriq/qoriq-components/linux.git

Signed-off-by: Zhao Qiang <qiang.zhao@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/rtc/rtc-pcf85363.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/rtc/rtc-pcf85363.c b/drivers/rtc/rtc-pcf85363.c
index 3450d615974d..3d148754a2f0 100644
--- a/drivers/rtc/rtc-pcf85363.c
+++ b/drivers/rtc/rtc-pcf85363.c
@@ -18,6 +18,7 @@
 #include <linux/of_device.h>
 #include <linux/regmap.h>
 
+#include "rtc-core.h"
 /*
  * Date/Time registers
  */
@@ -401,8 +402,6 @@ static int pcf85363_probe(struct i2c_client *client,
 		return PTR_ERR(pcf85363->rtc);
 
 	pcf85363->rtc->ops = &rtc_ops;
-	pcf85363->rtc->range_min = RTC_TIMESTAMP_BEGIN_2000;
-	pcf85363->rtc->range_max = RTC_TIMESTAMP_END_2099;
 
 	if (client->irq > 0) {
 		regmap_write(pcf85363->regmap, CTRL_FLAGS, 0);
@@ -422,7 +421,8 @@ static int pcf85363_probe(struct i2c_client *client,
 
 	for (i = 0; i < config->num_nvram; i++) {
 		nvmem_cfg[i].priv = pcf85363;
-		rtc_nvmem_register(pcf85363->rtc, &nvmem_cfg[i]);
+		pcf85363->rtc->nvmem_config = &nvmem_cfg[i];
+		rtc_nvmem_register(pcf85363->rtc);
 	}
 
 	return ret;
-- 
2.17.1


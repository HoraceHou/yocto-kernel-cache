From f7d10483ce84a5d6c71dc8a4e7846484b244cf45 Mon Sep 17 00:00:00 2001
From: Wen He <wen.he_1@nxp.com>
Date: Thu, 29 Aug 2019 16:31:26 +0800
Subject: [PATCH 045/245] drm/imx/hdp: ls1028a: Correction the connecter type

commit 06413c73a2c2df1682ae39685ae62bd4110f5e39 from
http://source.codeaurora.org/external/qoriq/qoriq-components/linux.git

This patch correction the connecter type HDMI to DP.

Signed-off-by: Wen He <wen.he_1@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/gpu/drm/imx/hdp/imx-hdp.c | 3 ++-
 drivers/gpu/drm/imx/hdp/imx-hdp.h | 1 +
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/imx/hdp/imx-hdp.c b/drivers/gpu/drm/imx/hdp/imx-hdp.c
index 2b46c74926cf..8c4b625b0b95 100644
--- a/drivers/gpu/drm/imx/hdp/imx-hdp.c
+++ b/drivers/gpu/drm/imx/hdp/imx-hdp.c
@@ -1243,6 +1243,7 @@ static struct hdp_ops ls1028a_dp_ops = {
 static struct hdp_devtype ls1028a_dp_devtype = {
 	.ops = &ls1028a_dp_ops,
 	.rw = &ls1028a_rw,
+	.connector_type = DRM_MODE_CONNECTOR_DisplayPort,
 };
 static const struct of_device_id imx_hdp_dt_ids[] = {
 	{ .compatible = "fsl,imx8qm-hdmi", .data = &imx8qm_hdmi_devtype},
@@ -1612,7 +1613,7 @@ static int imx_hdp_imx_bind(struct device *dev, struct device *master,
 
 	drm_connector_init(drm, connector,
 			   &imx_hdp_connector_funcs,
-			   DRM_MODE_CONNECTOR_HDMIA);
+			   devtype->connector_type);
 
 	drm_connector_attach_encoder(connector, encoder);
 
diff --git a/drivers/gpu/drm/imx/hdp/imx-hdp.h b/drivers/gpu/drm/imx/hdp/imx-hdp.h
index 7364b310928c..3b27319a270c 100644
--- a/drivers/gpu/drm/imx/hdp/imx-hdp.h
+++ b/drivers/gpu/drm/imx/hdp/imx-hdp.h
@@ -124,6 +124,7 @@ struct hdp_ops {
 struct hdp_devtype {
 	struct hdp_ops *ops;
 	struct hdp_rw_func *rw;
+	u32 connector_type;
 };
 
 struct hdp_video {
-- 
2.17.1


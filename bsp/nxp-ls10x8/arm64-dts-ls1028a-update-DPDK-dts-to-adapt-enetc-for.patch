From 110da0b19f70655cf5224be6564a24bc7e7fd101 Mon Sep 17 00:00:00 2001
From: Zhao Qiang <qiang.zhao@nxp.com>
Date: Tue, 24 Sep 2019 12:58:34 +0800
Subject: [PATCH 142/245] arm64: dts: ls1028a: update DPDK dts to adapt enetc
 for 4.19

commit fb30fb24adcbb1cfea38ffdb319a5a5bc626a126 from
http://source.codeaurora.org/external/qoriq/qoriq-components/linux.git

Signed-off-by: Gagandeep Singh <g.singh@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 .../dts/freescale/fsl-ls1028a-rdb-dpdk.dts    | 40 +++++++++++--------
 1 file changed, 24 insertions(+), 16 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1028a-rdb-dpdk.dts b/arch/arm64/boot/dts/freescale/fsl-ls1028a-rdb-dpdk.dts
index 018b3fe40f7f..e183991b6f84 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1028a-rdb-dpdk.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1028a-rdb-dpdk.dts
@@ -191,41 +191,44 @@
 	status = "okay";
 };
 
-&sai4 {
-	status = "okay";
+&enetc_port0 {
+	phy-connection-type = "sgmii";
+	fixed-link {
+		speed = <1000>;
+		full-duplex;
+	};
 };
 
-&mdio0 {
+&enetc_port1 {
+	status = "disabled";
+};
+
+&enetc_mdio_pf3 {
 	qsgmii_phy1: ethernet-phy@4 {
 		reg = <0x10>;
+		interrupt-parent = <&gpio1>;
+		interrupts = <25 IRQ_TYPE_EDGE_FALLING>;
 	};
 
 	qsgmii_phy2: ethernet-phy@5 {
 		reg = <0x11>;
+		interrupt-parent = <&gpio1>;
+		interrupts = <25 IRQ_TYPE_EDGE_FALLING>;
 	};
 
 	qsgmii_phy3: ethernet-phy@6 {
 		reg = <0x12>;
+		interrupt-parent = <&gpio1>;
+		interrupts = <25 IRQ_TYPE_EDGE_FALLING>;
 	};
 
 	qsgmii_phy4: ethernet-phy@7 {
 		reg = <0x13>;
+		interrupt-parent = <&gpio1>;
+		interrupts = <25 IRQ_TYPE_EDGE_FALLING>;
 	};
 };
 
-&enetc_port0 {
-	phy-connection-type = "sgmii";
-
-	fixed-link {
-		speed = <1000>;
-		full-duplex;
-	};
-};
-
-&enetc_port1 {
-	status = "disabled";
-};
-
 /* l2switch ports */
 &switch_port0 {
 	fixed-link {
@@ -254,6 +257,11 @@
 		full-duplex;
 	};
 };
+
+&sai4 {
+	status = "okay";
+};
+
 &display1 {
 	fsl,no_edid;
 	resolution = "3840x2160@60",
-- 
2.17.1


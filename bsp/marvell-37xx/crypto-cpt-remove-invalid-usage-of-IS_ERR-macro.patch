From 39372e0662ac61c4d32c610d2b7374f43e3e212e Mon Sep 17 00:00:00 2001
From: Lukasz Bartosik <lbartosik@marvell.com>
Date: Wed, 24 Apr 2019 09:12:35 +0200
Subject: [PATCH 185/386] crypto: cpt - remove invalid usage of IS_ERR macro

Change-Id: I4faf13f30a19f9fb450982bc61fec7b745b57cb7
Signed-off-by: Lukasz Bartosik <lbartosik@marvell.com>
Reviewed-on: https://sj1git1.cavium.com/8056
Tested-by: sa_ip-sw-jenkins <sa_ip-sw-jenkins@marvell.com>
Reviewed-by: Srujana Challa <schalla@cavium.com>
[RH: Original patch taken from marvell 88F3720 board support SDK 10.0-PR2003]
Signed-off-by: Ruiqiang Hao <Ruiqiang.Hao@windriver.com>
---
 drivers/crypto/cavium/cpt/common/cpt_algs.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/crypto/cavium/cpt/common/cpt_algs.c b/drivers/crypto/cavium/cpt/common/cpt_algs.c
index 6d487ceb54b0..2d48481544a0 100644
--- a/drivers/crypto/cavium/cpt/common/cpt_algs.c
+++ b/drivers/crypto/cavium/cpt/common/cpt_algs.c
@@ -658,7 +658,7 @@ static int calculateipadopad(struct crypto_aead *cipher)
 	int err = 0, icount = 0;
 
 	ctx->sdesc = alloc_sdesc(ctx->hashalg);
-	if (IS_ERR(ctx->sdesc))
+	if (!ctx->sdesc)
 		return -ENOMEM;
 
 	ctx->ipad = kzalloc(bs, GFP_KERNEL);
-- 
2.17.1


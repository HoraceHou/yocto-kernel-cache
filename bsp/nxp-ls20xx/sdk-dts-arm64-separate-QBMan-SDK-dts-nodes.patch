From 7a8c29a3d589e17c4b156afe693ec42a0f6cc622 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@nxp.com>
Date: Thu, 2 Nov 2017 15:37:46 +0200
Subject: [PATCH 442/767] sdk: dts: arm64: separate QBMan SDK dts nodes

Signed-off-by: Madalin Bucur <madalin.bucur@nxp.com>
[Xulin: Original patch taken from NXP LSDK-18.09.]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 .../dts/freescale/fsl-ls1043a-qds-sdk.dts     |   2 +
 .../dts/freescale/fsl-ls1043a-rdb-sdk.dts     |   2 +
 .../arm64/boot/dts/freescale/fsl-ls1043a.dtsi |   4 +-
 .../dts/freescale/fsl-ls1046a-qds-sdk.dts     |   2 +
 .../dts/freescale/fsl-ls1046a-rdb-sdk.dts     |   2 +
 .../arm64/boot/dts/freescale/fsl-ls1046a.dtsi |   4 +-
 .../dts/freescale/qoriq-bman-portals-sdk.dtsi |  55 +++++++++
 .../dts/freescale/qoriq-bman1-portals.dtsi    |  81 --------------
 .../dts/freescale/qoriq-qman-portals-sdk.dtsi |  38 +++++++
 .../dts/freescale/qoriq-qman1-portals.dtsi    | 104 ------------------
 10 files changed, 105 insertions(+), 189 deletions(-)
 create mode 100644 arch/arm64/boot/dts/freescale/qoriq-bman-portals-sdk.dtsi
 delete mode 100644 arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi
 create mode 100644 arch/arm64/boot/dts/freescale/qoriq-qman-portals-sdk.dtsi
 delete mode 100644 arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds-sdk.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds-sdk.dts
index 6c13b41671b6..493a7942db01 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds-sdk.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds-sdk.dts
@@ -45,6 +45,8 @@
  */
 
 #include "fsl-ls1043a-qds.dts"
+#include "qoriq-qman-portals-sdk.dtsi"
+#include "qoriq-bman-portals-sdk.dtsi"
 
 &bman_fbpr {
 	compatible = "fsl,bman-fbpr";
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb-sdk.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb-sdk.dts
index ac4b9a4183b5..d9248da266ef 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb-sdk.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb-sdk.dts
@@ -45,6 +45,8 @@
  */
 
 #include "fsl-ls1043a-rdb.dts"
+#include "qoriq-qman-portals-sdk.dtsi"
+#include "qoriq-bman-portals-sdk.dtsi"
 
 &bman_fbpr {
 	compatible = "fsl,bman-fbpr";
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 2099e193cee9..52ccae7ad844 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -879,5 +879,5 @@
 
 };
 
-#include "qoriq-qman1-portals.dtsi"
-#include "qoriq-bman1-portals.dtsi"
+#include "qoriq-qman-portals.dtsi"
+#include "qoriq-bman-portals.dtsi"
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1046a-qds-sdk.dts b/arch/arm64/boot/dts/freescale/fsl-ls1046a-qds-sdk.dts
index 2f93c2668513..bb0f062bc5ac 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1046a-qds-sdk.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1046a-qds-sdk.dts
@@ -45,6 +45,8 @@
  */
 
 #include "fsl-ls1046a-qds.dts"
+#include "qoriq-qman-portals-sdk.dtsi"
+#include "qoriq-bman-portals-sdk.dtsi"
 
 &bman_fbpr {
 	compatible = "fsl,bman-fbpr";
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1046a-rdb-sdk.dts b/arch/arm64/boot/dts/freescale/fsl-ls1046a-rdb-sdk.dts
index f84e49ba3cb4..decc88a23036 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1046a-rdb-sdk.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1046a-rdb-sdk.dts
@@ -45,6 +45,8 @@
  */
 
 #include "fsl-ls1046a-rdb.dts"
+#include "qoriq-qman-portals-sdk.dtsi"
+#include "qoriq-bman-portals-sdk.dtsi"
 
 &bman_fbpr {
 	compatible = "fsl,bman-fbpr";
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1046a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1046a.dtsi
index 91c53832de44..99ed8e6236dd 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1046a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1046a.dtsi
@@ -813,5 +813,5 @@
 	};
 };
 
-#include "qoriq-qman1-portals.dtsi"
-#include "qoriq-bman1-portals.dtsi"
+#include "qoriq-qman-portals.dtsi"
+#include "qoriq-bman-portals.dtsi"
diff --git a/arch/arm64/boot/dts/freescale/qoriq-bman-portals-sdk.dtsi b/arch/arm64/boot/dts/freescale/qoriq-bman-portals-sdk.dtsi
new file mode 100644
index 000000000000..0a68ec4c0026
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/qoriq-bman-portals-sdk.dtsi
@@ -0,0 +1,55 @@
+/*
+ * QorIQ BMan SDK Portals device tree nodes
+ *
+ * Copyright 2011-2016 Freescale Semiconductor Inc.
+ * Copyright 2017 NXP
+ *
+ * SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
+ */
+
+&bportals {
+	bman-portal@0 {
+		cell-index = <0>;
+	};
+
+	bman-portal@10000 {
+		cell-index = <1>;
+	};
+
+	bman-portal@20000 {
+		cell-index = <2>;
+	};
+
+	bman-portal@30000 {
+		cell-index = <3>;
+	};
+
+	bman-portal@40000 {
+		cell-index = <4>;
+	};
+
+	bman-portal@50000 {
+		cell-index = <5>;
+	};
+
+	bman-portal@60000 {
+		cell-index = <6>;
+	};
+
+	bman-portal@70000 {
+		cell-index = <7>;
+	};
+
+	bman-portal@80000 {
+		cell-index = <8>;
+	};
+
+	bman-portal@90000 {
+		cell-index = <9>;
+	};
+
+	 bman-bpids@0 {
+		compatible = "fsl,bpid-range";
+		fsl,bpid-range = <32 32>;
+	};
+};
diff --git a/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi b/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi
deleted file mode 100644
index 14680adb825d..000000000000
--- a/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi
+++ /dev/null
@@ -1,81 +0,0 @@
-/*
- * QorIQ BMan Portals device tree
- *
- * Copyright 2011-2016 Freescale Semiconductor Inc.
- *
- * SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
- */
-
-&bportals {
-	#address-cells = <1>;
-	#size-cells = <1>;
-	compatible = "simple-bus";
-
-	bman-portal@0 {
-		cell-index = <0>;
-		compatible = "fsl,bman-portal";
-		reg = <0x0 0x4000 0x4000000 0x4000>;
-		interrupts = <0 173 0x4>;
-	};
-
-	bman-portal@10000 {
-		cell-index = <1>;
-		compatible = "fsl,bman-portal";
-		reg = <0x10000 0x4000 0x4010000 0x4000>;
-		interrupts = <0 175 0x4>;
-	};
-
-	bman-portal@20000 {
-		cell-index = <2>;
-		compatible = "fsl,bman-portal";
-		reg = <0x20000 0x4000 0x4020000 0x4000>;
-		interrupts = <0 177 0x4>;
-	};
-
-	bman-portal@30000 {
-		cell-index = <3>;
-		compatible = "fsl,bman-portal";
-		reg = <0x30000 0x4000 0x4030000 0x4000>;
-		interrupts = <0 179 0x4>;
-	};
-
-	bman-portal@40000 {
-		cell-index = <4>;
-		compatible = "fsl,bman-portal";
-		reg = <0x40000 0x4000 0x4040000 0x4000>;
-		interrupts = <0 181 0x4>;
-	};
-
-	bman-portal@50000 {
-		cell-index = <5>;
-		compatible = "fsl,bman-portal";
-		reg = <0x50000 0x4000 0x4050000 0x4000>;
-		interrupts = <0 183 0x4>;
-	};
-
-	bman-portal@60000 {
-		cell-index = <6>;
-		compatible = "fsl,bman-portal";
-		reg = <0x60000 0x4000 0x4060000 0x4000>;
-		interrupts = <0 185 0x4>;
-	};
-
-	bman-portal@70000 {
-		cell-index = <7>;
-		compatible = "fsl,bman-portal";
-		reg = <0x70000 0x4000 0x4070000 0x4000>;
-		interrupts = <0 187 0x4>;
-	};
-
-	bman-portal@80000 {
-		cell-index = <8>;
-		compatible = "fsl,bman-portal";
-		reg = <0x80000 0x4000 0x4080000 0x4000>;
-		interrupts = <0 189 0x4>;
-	};
-
-	 bman-bpids@0 {
-		compatible = "fsl,bpid-range";
-		fsl,bpid-range = <32 32>;
-	};
-};
diff --git a/arch/arm64/boot/dts/freescale/qoriq-qman-portals-sdk.dtsi b/arch/arm64/boot/dts/freescale/qoriq-qman-portals-sdk.dtsi
new file mode 100644
index 000000000000..8dfb7db6dbe5
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/qoriq-qman-portals-sdk.dtsi
@@ -0,0 +1,38 @@
+/*
+ * QorIQ QMan SDK Portals device tree nodes
+ *
+ * Copyright 2011-2016 Freescale Semiconductor Inc.
+ * Copyright 2017 NXP
+ *
+ * SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
+ */
+
+&qportals {
+	qman-fqids@0 {
+		compatible = "fsl,fqid-range";
+		fsl,fqid-range = <256 256>;
+	};
+
+	qman-fqids@1 {
+		compatible = "fsl,fqid-range";
+		fsl,fqid-range = <32768 32768>;
+	};
+
+	qman-pools@0 {
+		compatible = "fsl,pool-channel-range";
+		fsl,pool-channel-range = <0x401 0xf>;
+	};
+
+	qman-cgrids@0 {
+		compatible = "fsl,cgrid-range";
+		fsl,cgrid-range = <0 256>;
+	};
+
+	qman-ceetm@0 {
+		compatible = "fsl,qman-ceetm";
+		fsl,ceetm-lfqid-range = <0xf00000 0x1000>;
+		fsl,ceetm-sp-range = <0 12>;
+		fsl,ceetm-lni-range = <0 8>;
+		fsl,ceetm-channel-range = <0 32>;
+	};
+};
diff --git a/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi b/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi
deleted file mode 100644
index 4f7edf487343..000000000000
--- a/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi
+++ /dev/null
@@ -1,104 +0,0 @@
-/*
- * QorIQ QMan Portals device tree
- *
- * Copyright 2011-2016 Freescale Semiconductor Inc.
- *
- * SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
- */
-
-&qportals {
-	#address-cells = <1>;
-	#size-cells = <1>;
-	compatible = "simple-bus";
-
-	qportal0: qman-portal@0 {
-		compatible = "fsl,qman-portal";
-		reg = <0x0 0x4000 0x4000000 0x4000>;
-		interrupts = <0 172 0x4>;
-		cell-index = <0>;
-	};
-
-	qportal1: qman-portal@10000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x10000 0x4000 0x4010000 0x4000>;
-		interrupts = <0 174 0x4>;
-		cell-index = <1>;
-	};
-
-	qportal2: qman-portal@20000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x20000 0x4000 0x4020000 0x4000>;
-		interrupts = <0 176 0x4>;
-		cell-index = <2>;
-	};
-
-	qportal3: qman-portal@30000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x30000 0x4000 0x4030000 0x4000>;
-		interrupts = <0 178 0x4>;
-		cell-index = <3>;
-	};
-
-	qportal4: qman-portal@40000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x40000 0x4000 0x4040000 0x4000>;
-		interrupts = <0 180 0x4>;
-		cell-index = <4>;
-	};
-
-	qportal5: qman-portal@50000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x50000 0x4000 0x4050000 0x4000>;
-		interrupts = <0 182 0x4>;
-		cell-index = <5>;
-	};
-
-	qportal6: qman-portal@60000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x60000 0x4000 0x4060000 0x4000>;
-		interrupts = <0 184 0x4>;
-		cell-index = <6>;
-	};
-
-	qportal7: qman-portal@70000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x70000 0x4000 0x4070000 0x4000>;
-		interrupts = <0 186 0x4>;
-		cell-index = <7>;
-	};
-
-	qportal8: qman-portal@80000 {
-		compatible = "fsl,qman-portal";
-		reg = <0x80000 0x4000 0x4080000 0x4000>;
-		interrupts = <0 188 0x4>;
-		cell-index = <8>;
-	};
-
-	qman-fqids@0 {
-		compatible = "fsl,fqid-range";
-		fsl,fqid-range = <256 256>;
-	};
-
-	qman-fqids@1 {
-		compatible = "fsl,fqid-range";
-		fsl,fqid-range = <32768 32768>;
-	};
-
-	qman-pools@0 {
-		compatible = "fsl,pool-channel-range";
-		fsl,pool-channel-range = <0x401 0xf>;
-	};
-
-	qman-cgrids@0 {
-		compatible = "fsl,cgrid-range";
-		fsl,cgrid-range = <0 256>;
-	};
-
-	qman-ceetm@0 {
-		compatible = "fsl,qman-ceetm";
-		fsl,ceetm-lfqid-range = <0xf00000 0x1000>;
-		fsl,ceetm-sp-range = <0 12>;
-		fsl,ceetm-lni-range = <0 8>;
-		fsl,ceetm-channel-range = <0 32>;
-	};
-};
-- 
2.17.0


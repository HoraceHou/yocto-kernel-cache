From cea1354a52066f563bb42ccd1084f301940752dc Mon Sep 17 00:00:00 2001
From: Suresh Gupta <suresh.gupta@nxp.com>
Date: Thu, 1 Feb 2018 23:49:56 +0530
Subject: [PATCH 381/767] arm64: dts: freescale: ls208xa: Modify DT nodes for
 qspi

Signed-off-by: Abhimanyu Saini <abhimanyu.saini@nxp.com>
[Xulin: Original patch taken from NXP LSDK-18.09.]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls2081a-rdb.dts  | 6 ++++--
 arch/arm64/boot/dts/freescale/fsl-ls208xa-qds.dtsi | 5 +++++
 2 files changed, 9 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls2081a-rdb.dts b/arch/arm64/boot/dts/freescale/fsl-ls2081a-rdb.dts
index c3375bf73779..c1741f5e6631 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls2081a-rdb.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls2081a-rdb.dts
@@ -130,15 +130,17 @@
 		#address-cells = <1>;
 		#size-cells = <1>;
 		compatible = "spansion,m25p80";
-		m25p,fast-read;
+		spi-rx-bus-width = <4>;
+		spi-tx-bus-width = <4>;
 		spi-max-frequency = <20000000>;
 		reg = <0>;
 	};
 	flash1: s25fs512s@1 {
 		#address-cells = <1>;
 		#size-cells = <1>;
+		spi-rx-bus-width = <4>;
+		spi-tx-bus-width = <4>;
 		compatible = "spansion,m25p80";
-		m25p,fast-read;
 		spi-max-frequency = <20000000>;
 		reg = <1>;
 	};
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls208xa-qds.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls208xa-qds.dtsi
index 1de618801c73..7c14ea3278d0 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls208xa-qds.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls208xa-qds.dtsi
@@ -165,16 +165,21 @@
 
 &qspi {
 	status = "okay";
+	fsl,qspi-has-second-chip;
 	flash0: s25fl256s1@0 {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		compatible = "st,m25p80";
+		spi-rx-bus-width = <4>;
+		spi-tx-bus-width = <4>;
 		spi-max-frequency = <20000000>;
 		reg = <0>;
 	};
 	flash2: s25fl256s1@2 {
 		#address-cells = <1>;
 		#size-cells = <1>;
+		spi-rx-bus-width = <4>;
+		spi-tx-bus-width = <4>;
 		compatible = "st,m25p80";
 		spi-max-frequency = <20000000>;
 		reg = <2>;
-- 
2.17.0


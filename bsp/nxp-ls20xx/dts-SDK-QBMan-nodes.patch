From 6b8d836c5d223a308caa25f7579523b303f06e1a Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@nxp.com>
Date: Wed, 10 May 2017 17:35:55 +0300
Subject: [PATCH 022/767] dts: SDK QBMan nodes

Signed-off-by: Madalin Bucur <madalin.bucur@nxp.com>
[Xulin: Original patch taken from NXP LSDK-18.09.]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 .../dts/freescale/qoriq-bman1-portals.dtsi    | 14 ++++++++++
 .../dts/freescale/qoriq-qman1-portals.dtsi    | 28 +++++++++++++++++++
 .../boot/dts/fsl/qoriq-bman1-portals.dtsi     | 10 +++++++
 3 files changed, 52 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi b/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi
index b007344a81bd..14680adb825d 100644
--- a/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi
+++ b/arch/arm64/boot/dts/freescale/qoriq-bman1-portals.dtsi
@@ -12,56 +12,70 @@
 	compatible = "simple-bus";
 
 	bman-portal@0 {
+		cell-index = <0>;
 		compatible = "fsl,bman-portal";
 		reg = <0x0 0x4000 0x4000000 0x4000>;
 		interrupts = <0 173 0x4>;
 	};
 
 	bman-portal@10000 {
+		cell-index = <1>;
 		compatible = "fsl,bman-portal";
 		reg = <0x10000 0x4000 0x4010000 0x4000>;
 		interrupts = <0 175 0x4>;
 	};
 
 	bman-portal@20000 {
+		cell-index = <2>;
 		compatible = "fsl,bman-portal";
 		reg = <0x20000 0x4000 0x4020000 0x4000>;
 		interrupts = <0 177 0x4>;
 	};
 
 	bman-portal@30000 {
+		cell-index = <3>;
 		compatible = "fsl,bman-portal";
 		reg = <0x30000 0x4000 0x4030000 0x4000>;
 		interrupts = <0 179 0x4>;
 	};
 
 	bman-portal@40000 {
+		cell-index = <4>;
 		compatible = "fsl,bman-portal";
 		reg = <0x40000 0x4000 0x4040000 0x4000>;
 		interrupts = <0 181 0x4>;
 	};
 
 	bman-portal@50000 {
+		cell-index = <5>;
 		compatible = "fsl,bman-portal";
 		reg = <0x50000 0x4000 0x4050000 0x4000>;
 		interrupts = <0 183 0x4>;
 	};
 
 	bman-portal@60000 {
+		cell-index = <6>;
 		compatible = "fsl,bman-portal";
 		reg = <0x60000 0x4000 0x4060000 0x4000>;
 		interrupts = <0 185 0x4>;
 	};
 
 	bman-portal@70000 {
+		cell-index = <7>;
 		compatible = "fsl,bman-portal";
 		reg = <0x70000 0x4000 0x4070000 0x4000>;
 		interrupts = <0 187 0x4>;
 	};
 
 	bman-portal@80000 {
+		cell-index = <8>;
 		compatible = "fsl,bman-portal";
 		reg = <0x80000 0x4000 0x4080000 0x4000>;
 		interrupts = <0 189 0x4>;
 	};
+
+	 bman-bpids@0 {
+		compatible = "fsl,bpid-range";
+		fsl,bpid-range = <32 32>;
+	};
 };
diff --git a/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi b/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi
index 4baec2c19020..4f7edf487343 100644
--- a/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi
+++ b/arch/arm64/boot/dts/freescale/qoriq-qman1-portals.dtsi
@@ -73,4 +73,32 @@
 		interrupts = <0 188 0x4>;
 		cell-index = <8>;
 	};
+
+	qman-fqids@0 {
+		compatible = "fsl,fqid-range";
+		fsl,fqid-range = <256 256>;
+	};
+
+	qman-fqids@1 {
+		compatible = "fsl,fqid-range";
+		fsl,fqid-range = <32768 32768>;
+	};
+
+	qman-pools@0 {
+		compatible = "fsl,pool-channel-range";
+		fsl,pool-channel-range = <0x401 0xf>;
+	};
+
+	qman-cgrids@0 {
+		compatible = "fsl,cgrid-range";
+		fsl,cgrid-range = <0 256>;
+	};
+
+	qman-ceetm@0 {
+		compatible = "fsl,qman-ceetm";
+		fsl,ceetm-lfqid-range = <0xf00000 0x1000>;
+		fsl,ceetm-sp-range = <0 12>;
+		fsl,ceetm-lni-range = <0 8>;
+		fsl,ceetm-channel-range = <0 32>;
+	};
 };
diff --git a/arch/powerpc/boot/dts/fsl/qoriq-bman1-portals.dtsi b/arch/powerpc/boot/dts/fsl/qoriq-bman1-portals.dtsi
index 5022432ebaa9..65701adac782 100644
--- a/arch/powerpc/boot/dts/fsl/qoriq-bman1-portals.dtsi
+++ b/arch/powerpc/boot/dts/fsl/qoriq-bman1-portals.dtsi
@@ -38,51 +38,61 @@
 	compatible = "simple-bus";
 
 	bman-portal@0 {
+		cell-index = <0>;
 		compatible = "fsl,bman-portal";
 		reg = <0x0 0x4000>, <0x100000 0x1000>;
 		interrupts = <105 2 0 0>;
 	};
 	bman-portal@4000 {
+		cell-index = <1>;
 		compatible = "fsl,bman-portal";
 		reg = <0x4000 0x4000>, <0x101000 0x1000>;
 		interrupts = <107 2 0 0>;
 	};
 	bman-portal@8000 {
+		cell-index = <2>;
 		compatible = "fsl,bman-portal";
 		reg = <0x8000 0x4000>, <0x102000 0x1000>;
 		interrupts = <109 2 0 0>;
 	};
 	bman-portal@c000 {
+		cell-index = <3>;
 		compatible = "fsl,bman-portal";
 		reg = <0xc000 0x4000>, <0x103000 0x1000>;
 		interrupts = <111 2 0 0>;
 	};
 	bman-portal@10000 {
+		cell-index = <4>;
 		compatible = "fsl,bman-portal";
 		reg = <0x10000 0x4000>, <0x104000 0x1000>;
 		interrupts = <113 2 0 0>;
 	};
 	bman-portal@14000 {
+		cell-index = <5>;
 		compatible = "fsl,bman-portal";
 		reg = <0x14000 0x4000>, <0x105000 0x1000>;
 		interrupts = <115 2 0 0>;
 	};
 	bman-portal@18000 {
+		cell-index = <6>;
 		compatible = "fsl,bman-portal";
 		reg = <0x18000 0x4000>, <0x106000 0x1000>;
 		interrupts = <117 2 0 0>;
 	};
 	bman-portal@1c000 {
+		cell-index = <7>;
 		compatible = "fsl,bman-portal";
 		reg = <0x1c000 0x4000>, <0x107000 0x1000>;
 		interrupts = <119 2 0 0>;
 	};
 	bman-portal@20000 {
+		cell-index = <8>;
 		compatible = "fsl,bman-portal";
 		reg = <0x20000 0x4000>, <0x108000 0x1000>;
 		interrupts = <121 2 0 0>;
 	};
 	bman-portal@24000 {
+		cell-index = <9>;
 		compatible = "fsl,bman-portal";
 		reg = <0x24000 0x4000>, <0x109000 0x1000>;
 		interrupts = <123 2 0 0>;
-- 
2.17.0


From 354e58691a7ee96db3317c53541e20cb2b2c4694 Mon Sep 17 00:00:00 2001
From: Laurentiu Palcu <laurentiu.palcu@nxp.com>
Date: Fri, 31 Aug 2018 13:58:01 +0300
Subject: [PATCH 4504/5242] MLK-19419: drm: imx: dcss: Add linear modifier
 support for all formats

commit  d5f5a2eca5917bb54ccf28062ef97b820b2e7e8b from
https://source.codeaurora.org/external/imx/linux-imx.git

Tiled formats are supported only for YUV420 semi-planar formats.
However, the other formats should support at least the LINEAR modifier.
Some userspace app may pass on framebuffers with the linear modifier
attached and, currently, this is rejected for YUV422 and RGB formats.

This patch fixes that.

Signed-off-by: Laurentiu Palcu <laurentiu.palcu@nxp.com>
Reported-by: Jared Hu <jared.hu@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/gpu/drm/imx/dcss/dcss-plane.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/imx/dcss/dcss-plane.c b/drivers/gpu/drm/imx/dcss/dcss-plane.c
index 11135e5..b9f26b1 100644
--- a/drivers/gpu/drm/imx/dcss/dcss-plane.c
+++ b/drivers/gpu/drm/imx/dcss/dcss-plane.c
@@ -157,7 +157,7 @@ static bool dcss_plane_format_mod_supported(struct drm_plane *plane,
 			       modifier == DRM_FORMAT_MOD_VSI_G2_TILED ||
 			       modifier == DRM_FORMAT_MOD_VSI_G2_TILED_COMPRESSED;
 		default:
-			return false;
+			return modifier == DRM_FORMAT_MOD_LINEAR;
 		}
 		break;
 	default:
-- 
1.7.9.5


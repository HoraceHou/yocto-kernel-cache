From 1ae13a5201c0f9ffb04943b45a55dbbea9414117 Mon Sep 17 00:00:00 2001
From: Leonard Crestez <leonard.crestez@nxp.com>
Date: Mon, 16 Apr 2018 23:20:22 +0300
Subject: [PATCH 3312/5242] ARM: dts: imx7ulp-evk: minimal fixes removing
 bmcdhd and wrong gpio references

commit  0357679200a2c6ccf434321fcc9dace245fc7a24 from
https://source.codeaurora.org/external/imx/linux-imx.git

Signed-off-by: Leonard Crestez <leonard.crestez@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/imx7ulp-evk-sd1.dts |    4 ----
 arch/arm/boot/dts/imx7ulp-evk.dts     |   19 +------------------
 2 files changed, 1 insertion(+), 22 deletions(-)

diff --git a/arch/arm/boot/dts/imx7ulp-evk-sd1.dts b/arch/arm/boot/dts/imx7ulp-evk-sd1.dts
index 1dddfb214..4c03338 100644
--- a/arch/arm/boot/dts/imx7ulp-evk-sd1.dts
+++ b/arch/arm/boot/dts/imx7ulp-evk-sd1.dts
@@ -23,10 +23,6 @@
 	};
 };
 
-&bcmdhd_wlan_0 {
-	status = "disabled";
-};
-
 &lpuart6 {
 	status = "disabled";
 };
diff --git a/arch/arm/boot/dts/imx7ulp-evk.dts b/arch/arm/boot/dts/imx7ulp-evk.dts
index 8483067..27fa574 100644
--- a/arch/arm/boot/dts/imx7ulp-evk.dts
+++ b/arch/arm/boot/dts/imx7ulp-evk.dts
@@ -25,13 +25,6 @@
 		stdout-path = &lpuart4;
 	};
 
-	bcmdhd_wlan_0: bcmdhd_wlan@0 {
-		compatible = "android,bcmdhd_wlan";
-		wlreg_on-supply = <&wlreg_on>;
-		bcmdhd_fw = "/lib/firmware/bcm/1DX_BCM4343W/fw_bcmdhd.bin";
-		bcmdhd_nv = "/lib/firmware/bcm/1DX_BCM4343W/bcmdhd.1DX.SDIO.cal";
-	};
-
 	memory {
 		device_type = "memory";
 		reg = <0x60000000 0x40000000>;
@@ -54,7 +47,7 @@
 
 	modem_reset: modem-reset {
 		compatible = "gpio-reset";
-		reset-gpios = <&gpio2 7 GPIO_ACTIVE_LOW>;
+		reset-gpios = <&rpmsg_gpio0 15 GPIO_ACTIVE_LOW>;
 		reset-delay-us = <1000>;
 		#reset-cells = <0>;
 	};
@@ -64,16 +57,6 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		wlreg_on: fixedregulator@100 {
-			compatible = "regulator-fixed";
-			regulator-min-microvolt = <5000000>;
-			regulator-max-microvolt = <5000000>;
-			regulator-name = "wlreg_on";
-			gpio = <&gpio2 6 GPIO_ACTIVE_HIGH>;
-			startup-delay-us = <100>;
-			enable-active-high;
-		};
-
 		reg_usb_otg1_vbus: regulator@0 {
 			compatible = "regulator-fixed";
 			reg = <0>;
-- 
1.7.9.5


From 86c1f8a7f62a3e49eeba837bddb08783e263083b Mon Sep 17 00:00:00 2001
From: Gao Pan <pandy.gao@nxp.com>
Date: Fri, 26 May 2017 11:30:03 +0800
Subject: [PATCH 1830/5242] MLK-14982-2 arm64: imx8qm: add ipg clk for lpi2c
 device node

commit  d3fd8da30d6e830cdd1bc24f178e86e6155bbf8b from
https://source.codeaurora.org/external/imx/linux-imx.git

add ipg clk for lpi2c device node

Signed-off-by: Gao Pan <pandy.gao@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-imx8qm.dtsi |   40 +++++++++++++++----------
 1 file changed, 24 insertions(+), 16 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm.dtsi b/arch/arm64/boot/dts/freescale/fsl-imx8qm.dtsi
index 91df7fd..9a54984 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8qm.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm.dtsi
@@ -771,8 +771,9 @@
 		reg = <0x0 0x5a800000 0x0 0x4000>;
 		interrupts = <GIC_SPI 220 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&gic>;
-		clocks = <&clk IMX8QM_I2C0_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_I2C0_CLK>,
+			 <&clk IMX8QM_I2C0_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_I2C0_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_dma_lpi2c0>;
@@ -784,8 +785,9 @@
 		reg = <0x0 0x5a810000 0x0 0x4000>;
 		interrupts = <GIC_SPI 221 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&gic>;
-		clocks = <&clk IMX8QM_I2C1_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_I2C1_CLK>,
+			 <&clk IMX8QM_I2C1_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_I2C1_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_dma_lpi2c1>;
@@ -797,8 +799,9 @@
 		reg = <0x0 0x5a820000 0x0 0x4000>;
 		interrupts = <GIC_SPI 222 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&gic>;
-		clocks = <&clk IMX8QM_I2C2_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_I2C2_CLK>,
+			 <&clk IMX8QM_I2C2_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_I2C2_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_dma_lpi2c2>;
@@ -810,8 +813,9 @@
 		reg = <0x0 0x5a830000 0x0 0x4000>;
 		interrupts = <GIC_SPI 223 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&gic>;
-		clocks = <&clk IMX8QM_I2C3_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_I2C3_CLK>,
+			 <&clk IMX8QM_I2C3_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_I2C3_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_dma_lpi2c3>;
@@ -823,8 +827,9 @@
 		reg = <0x0 0x5a840000 0x0 0x4000>;
 		interrupts = <GIC_SPI 224 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&gic>;
-		clocks = <&clk IMX8QM_I2C4_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_I2C4_CLK>,
+			 <&clk IMX8QM_I2C4_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_I2C4_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_dma_lpi2c4>;
@@ -846,8 +851,9 @@
 		reg = <0x0 0x56266000 0x0 0x1000>;
 		interrupts = <8 IRQ_TYPE_LEVEL_HIGH>;
 		interrupt-parent = <&irqsteer_hdmi>;
-		clocks = <&clk IMX8QM_HDMI_I2C0_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_HDMI_I2C0_CLK>,
+			 <&clk IMX8QM_HDMI_I2C_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_HDMI_I2C0_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_hdmi_i2c0>;
@@ -860,8 +866,9 @@
 		interrupts = <0 57 4>;
 		fsl,irq-steer = <0x56240000>;
 		fsl,irq-num = <0x200>;
-		clocks = <&clk IMX8QM_LVDS0_I2C0_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_LVDS0_I2C0_CLK>,
+			 <&clk IMX8QM_LVDS0_I2C0_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_LVDS0_I2C0_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_lvds0_i2c0>;
@@ -874,8 +881,9 @@
 		interrupts = <0 58 4>;
 		fsl,irq-steer = <0x57240000>;
 		fsl,irq-num = <0x200>;
-		clocks = <&clk IMX8QM_LVDS1_I2C0_CLK>;
-		clock-names = "per";
+		clocks = <&clk IMX8QM_LVDS1_I2C0_CLK>,
+			 <&clk IMX8QM_LVDS1_I2C0_IPG_CLK>;
+		clock-names = "per", "ipg";
 		assigned-clocks = <&clk IMX8QM_LVDS1_I2C0_CLK>;
 		assigned-clock-rates = <24000000>;
 		power-domains = <&pd_lvds1_i2c0>;
-- 
1.7.9.5


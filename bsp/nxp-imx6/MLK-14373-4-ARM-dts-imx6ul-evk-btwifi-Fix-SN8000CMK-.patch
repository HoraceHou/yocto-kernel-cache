From 48b85108feb922d13b0aabefa75d941a2cf6f37f Mon Sep 17 00:00:00 2001
From: xlin <xlin@murata.com>
Date: Tue, 7 Feb 2017 14:35:20 -0600
Subject: [PATCH 1579/5242] MLK-14373-4: ARM: dts: imx6ul-evk-btwifi: Fix
 SN8000CMK bringup error
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

commit  c6e037bbd0a9b18ca933aa5d7e1ef80bb4314d8f from
https://source.codeaurora.org/external/imx/linux-imx.git

Fix SN8000CMK bring-up error on i.MX6UL/ULL EVKâ€™s: BT_REG_ON line pulled
low prior to SDIO initialization. This fix applies to all modules: i.e.
default operation for all modules is that both WL_REG_ON and BT_REG_ON
lines are pulled low (0V) during power-on-reset.

Signed-off-by: xlin <xlin@murata.com>
Signed-off-by: Tiberiu Breana <andrei-tiberiu.breana@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/imx6ul-evk-btwifi.dtsi |    7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/arch/arm/boot/dts/imx6ul-evk-btwifi.dtsi b/arch/arm/boot/dts/imx6ul-evk-btwifi.dtsi
index e04c9f5..012f4d6 100644
--- a/arch/arm/boot/dts/imx6ul-evk-btwifi.dtsi
+++ b/arch/arm/boot/dts/imx6ul-evk-btwifi.dtsi
@@ -54,3 +54,10 @@
 	pm-ignore-notify;
 	wifi-host; /* add hook for SD card detect mechanism for BCMDHD driver */
 };
+
+&gpio_spi {
+	/* Murata: modify default setting so that BT_nPWD/BT_REG_ON
+	 * is low (0V) during kernel boot.
+	 */
+	registers-default = /bits/ 8 <0x47>;
+};
-- 
1.7.9.5


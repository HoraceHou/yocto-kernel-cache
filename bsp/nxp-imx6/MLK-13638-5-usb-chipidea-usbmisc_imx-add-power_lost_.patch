From c0ebe9795813db02125825033f5d3495e7edac33 Mon Sep 17 00:00:00 2001
From: Peter Chen <peter.chen@nxp.com>
Date: Thu, 22 Dec 2016 11:19:03 +0800
Subject: [PATCH 1461/5242] MLK-13638-5 usb: chipidea: usbmisc_imx: add
 power_lost_check API for imx7ulp

commit  6501172d8e8f26af7e3279426359cae7c5e2be37 from
https://source.codeaurora.org/external/imx/linux-imx.git

For imx7ulp, the power of USB controller may be lost, add power_lost_check
API for USB recovery.

Signed-off-by: Peter Chen <peter.chen@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/usb/chipidea/usbmisc_imx.c |    1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/usb/chipidea/usbmisc_imx.c b/drivers/usb/chipidea/usbmisc_imx.c
index 78fbacf..d079a14 100644
--- a/drivers/usb/chipidea/usbmisc_imx.c
+++ b/drivers/usb/chipidea/usbmisc_imx.c
@@ -1033,6 +1033,7 @@ static int usbmisc_term_select_override(struct imx_usbmisc_data *data,
 static const struct usbmisc_ops imx7ulp_usbmisc_ops = {
 	.init = usbmisc_imx7d_init,
 	.set_wakeup = usbmisc_imx7d_set_wakeup,
+	.power_lost_check = usbmisc_imx7d_power_lost_check,
 };
 
 static inline bool is_imx53_usbmisc(struct imx_usbmisc_data *data)
-- 
1.7.9.5


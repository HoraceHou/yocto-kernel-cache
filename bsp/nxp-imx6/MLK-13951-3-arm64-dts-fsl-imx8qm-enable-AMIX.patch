From 5cf27025dc943f12449e51e019e490760814a68a Mon Sep 17 00:00:00 2001
From: Viorel Suman <viorel.suman@nxp.com>
Date: Thu, 27 Jul 2017 11:47:05 +0300
Subject: [PATCH 2241/5242] MLK-13951-3 arm64: dts: fsl-imx8qm: enable AMIX

commit  d2e66f0c0ca4c62fefc2ffa8d556c232ddba90fb from
https://source.codeaurora.org/external/imx/linux-imx.git

Enable AMIX in i.MX8 QM.

Signed-off-by: Viorel Suman <viorel.suman@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/freescale/fsl-imx8qm-lpddr4-arm2.dts  |   31 ++++++++++++++++++++
 1 file changed, 31 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm-lpddr4-arm2.dts b/arch/arm64/boot/dts/freescale/fsl-imx8qm-lpddr4-arm2.dts
index 364e1de..aed76bb 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8qm-lpddr4-arm2.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm-lpddr4-arm2.dts
@@ -82,6 +82,13 @@
 		audio-codec = <&codec>;
 		asrc-controller = <&asrc0>;
 	};
+
+	sound-amix-sai {
+		compatible = "fsl,imx-audio-amix";
+		model = "amix-audio-sai";
+		dais = <&sai6>, <&sai7>;
+		amix-controller = <&amix>;
+	};
 };
 
 &acm {
@@ -92,6 +99,10 @@
 	status = "okay";
 };
 
+&amix {
+	status = "okay";
+};
+
 &asrc0 {
 	fsl,asrc-rate  = <48000>;
 	status = "okay";
@@ -112,6 +123,26 @@
 	status = "okay";
 };
 
+&sai6 {
+	assigned-clocks = <&clk IMX8QM_ACM_SAI6_MCLK_SEL>,
+			<&clk IMX8QM_AUD_SAI_6_MCLK>;
+	assigned-clock-parents = <&clk IMX8QM_AUD_ACM_AUD_PLL_CLK0_CLK>;
+	assigned-clock-rates = <0>, <24576000>;
+	fsl,sai-asynchronous;
+	fsl,txm-rxs;
+	status = "okay";
+};
+
+&sai7 {
+	assigned-clocks = <&clk IMX8QM_ACM_SAI7_MCLK_SEL>,
+			<&clk IMX8QM_AUD_SAI_7_MCLK>;
+	assigned-clock-parents = <&clk IMX8QM_AUD_ACM_AUD_PLL_CLK0_CLK>;
+	assigned-clock-rates = <0>, <24576000>;
+	fsl,sai-asynchronous;
+	fsl,txm-rxs;
+	status = "okay";
+};
+
 &iomuxc {
 	imx8qm-arm2 {
 
-- 
1.7.9.5


From 144b5c258021c42422232b0e5d4a1c8e3f6f465d Mon Sep 17 00:00:00 2001
From: Peng Fan <peng.fan@nxp.com>
Date: Thu, 27 Sep 2018 15:50:12 +0800
Subject: [PATCH 4786/5242] MLK-19728-5 ARM64: dts: enable xen_i2c and
 passthrough sensors to domu

commit  2d3d0d202364b1ef8a125c72046cb417fd6a6fd8 from
https://source.codeaurora.org/external/imx/linux-imx.git

Introduce xen_i2c node and passthrough the i2c0 sensors to domu.

The BuildInfo
  - SCFW 148acb34, SECO-FW 31fabbff, IMX-MKIMAGE f244aefa, ATF 1590be0
  - U-Boot 2018.03-00707-g884cada50b-dirty

Signed-off-by: Peng Fan <peng.fan@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 .../boot/dts/freescale/fsl-imx8qm-mek-dom0.dts     |   14 +++++++++
 .../boot/dts/freescale/fsl-imx8qm-mek-domu.dts     |   31 ++++++++++++++++++++
 2 files changed, 45 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-dom0.dts b/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-dom0.dts
index b502a43..e7d88a3 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-dom0.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-dom0.dts
@@ -569,3 +569,17 @@
 &caam_sm {
 	xen,passthrough;
 };
+
+&i2c0 {
+	fxos8700@1e {
+		xen,passthrough;
+	};
+
+	fxas2100x@20 {
+		xen,passthrough;
+	};
+
+	mpl3115@60 {
+		xen,passthrough;
+	};
+};
diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-domu.dts b/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-domu.dts
index 766cc20..1069161 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-domu.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8qm-mek-domu.dts
@@ -285,6 +285,12 @@
 			interrupt-names = "edma0-chan14-rx", "edma0-chan15-tx";
 			status = "okay";
 		};
+
+		xen_i2c1: xen_i2c@1 {
+			compatible = "xen,i2c";
+			be-adapter = "5a800000.i2c";
+			status = "okay";
+		};
 	};
 };
 
@@ -819,3 +825,28 @@
 	core_type = <2>;
 	status = "okay";
 };
+
+&xen_i2c1 {
+	#address-cells = <1>;
+	#size-cells = <0>;
+	clock-frequency = <100000>;
+	status = "okay";
+
+	fxos8700@1e {
+		compatible = "fsl,fxos8700";
+		reg = <0x1e>;
+		interrupt-open-drain;
+	};
+
+	fxas2100x@20 {
+		compatible = "fsl,fxas2100x";
+		reg = <0x20>;
+		interrupt-open-drain;
+	};
+
+	mpl3115@60 {
+		compatible = "fsl,mpl3115";
+		reg = <0x60>;
+		interrupt-open-drain;
+	};
+};
-- 
1.7.9.5


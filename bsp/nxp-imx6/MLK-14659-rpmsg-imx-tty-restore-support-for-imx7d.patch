From f0295d5b5bced7214290baa234f36c34bad267c6 Mon Sep 17 00:00:00 2001
From: Octavian Purdila <octavian.purdila@nxp.com>
Date: Tue, 18 Apr 2017 18:11:59 +0300
Subject: [PATCH 1707/5242] MLK-14659 rpmsg: imx: tty: restore support for
 imx7d

commit  acd81841bf9401d3e5f306d9fa196f79ffcf9aec from
https://source.codeaurora.org/external/imx/linux-imx.git

Commit 2a596c353234 ("MLK-13981-2 rpmsg: imx: enable rpmsg virt tty")
enabled support for imx7ulp but it broke support for imx7d since the
currently distributed M4 image for imx7d still uses the old
"rpmsg-openamp-demo-channel" naming.

While we could change the channel name in the M4 image it is better to
maintain backwards compatibility, so add the old naming back to the id
table.

Signed-off-by: Octavian Purdila <octavian.purdila@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/rpmsg/imx_rpmsg_tty.c |    1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/rpmsg/imx_rpmsg_tty.c b/drivers/rpmsg/imx_rpmsg_tty.c
index 3545fd2..42b245d 100644
--- a/drivers/rpmsg/imx_rpmsg_tty.c
+++ b/drivers/rpmsg/imx_rpmsg_tty.c
@@ -207,6 +207,7 @@ static void rpmsg_tty_remove(struct rpmsg_device *rpdev)
 
 static struct rpmsg_device_id rpmsg_driver_tty_id_table[] = {
 	{ .name	= "rpmsg-virtual-tty-channel" },
+	{ .name = "rpmsg-openamp-demo-channel" },
 	{ },
 };
 MODULE_DEVICE_TABLE(rpmsg, rpmsg_driver_tty_id_table);
-- 
1.7.9.5


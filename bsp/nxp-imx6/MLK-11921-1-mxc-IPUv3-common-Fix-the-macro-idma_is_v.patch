From 163d3b98ec91ee374dc8d7d41adcf04a2a8019f4 Mon Sep 17 00:00:00 2001
From: Liu Ying <Ying.Liu@freescale.com>
Date: Mon, 30 Nov 2015 17:01:49 +0800
Subject: [PATCH 0714/5242] MLK-11921-1 mxc IPUv3: common: Fix the macro
 idma_is_valid/idma_mask definitions

commit  e8ba43b3afdfdbabaa6b2eb8688ec63e82057617 from
https://source.codeaurora.org/external/imx/linux-imx.git

This patch adds missing parentheses around the argument of the macro
idma_is_valid and idma_mask to avoid any potential macro expansion issue.

Signed-off-by: Liu Ying <Ying.Liu@freescale.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/mxc/ipu3/ipu_common.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/mxc/ipu3/ipu_common.c b/drivers/mxc/ipu3/ipu_common.c
index 749975f..6d66ed5 100644
--- a/drivers/mxc/ipu3/ipu_common.c
+++ b/drivers/mxc/ipu3/ipu_common.c
@@ -131,8 +131,8 @@ static inline uint32_t tri_cur_buf_shift(uint32_t dma_chan)
 	return ffs(mask) - 1;
 }
 
-#define idma_is_valid(ch)	(ch != NO_DMA)
-#define idma_mask(ch)		(idma_is_valid(ch) ? (1UL << (ch & 0x1F)) : 0)
+#define idma_is_valid(ch)	((ch) != NO_DMA)
+#define idma_mask(ch)		(idma_is_valid(ch) ? (1UL << ((ch) & 0x1F)) : 0)
 
 static inline bool idma_is_set(struct ipu_soc *ipu, uint32_t reg, uint32_t dma)
 {
-- 
1.7.9.5


From 8da69095d2702d4b3201c5cb57d53ad3fbe8f725 Mon Sep 17 00:00:00 2001
From: Bai Ping <ping.bai@nxp.com>
Date: Fri, 14 Sep 2018 19:22:55 +0800
Subject: [PATCH 4658/5242] MLK-19589-03 driver: cpufreq: Add cpufreq support
 for imx6ulz

commit  20c47d083508e0eb17fba5033690f6e3199c257b from
https://source.codeaurora.org/external/imx/linux-imx.git

Add cpufreq support for i.MX6ULZ.

Signed-off-by: Bai Ping <ping.bai@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/cpufreq/imx6q-cpufreq.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/cpufreq/imx6q-cpufreq.c b/drivers/cpufreq/imx6q-cpufreq.c
index 0a8d3e8..fa0430a 100644
--- a/drivers/cpufreq/imx6q-cpufreq.c
+++ b/drivers/cpufreq/imx6q-cpufreq.c
@@ -157,7 +157,8 @@ static int imx6q_set_target(struct cpufreq_policy *policy, unsigned int index)
 	 *  - Disable pll2_pfd2_396m_clk
 	 */
 	if (of_machine_is_compatible("fsl,imx6ul") ||
-	    of_machine_is_compatible("fsl,imx6ull")) {
+	    of_machine_is_compatible("fsl,imx6ull") ||
+	    of_machine_is_compatible("fsl,imx6ulz")) {
 		/*
 		 * When changing pll1_sw_clk's parent to pll1_sys_clk,
 		 * CPU may run at higher than 528MHz, this will lead to
@@ -444,7 +445,8 @@ static int imx6q_cpufreq_probe(struct platform_device *pdev)
 	}
 
 	if (of_machine_is_compatible("fsl,imx6ul") ||
-	    of_machine_is_compatible("fsl,imx6ull"))
+	    of_machine_is_compatible("fsl,imx6ull") ||
+	    of_machine_is_compatible("fsl,imx6ulz"))
 		num_clks = IMX6UL_CPUFREQ_CLK_NUM;
 	else
 		num_clks = IMX6Q_CPUFREQ_CLK_NUM;
-- 
1.7.9.5


From 15fc49e60612b01c5521e8af6acc140820e53e22 Mon Sep 17 00:00:00 2001
From: Shengjiu Wang <shengjiu.wang@nxp.com>
Date: Wed, 15 Aug 2018 09:53:07 +0800
Subject: [PATCH 4389/5242] MLK-18947: ASoC: fsl_sai: fix volatile function

commit  33d997b7d5d503f9e77cbb4f2dd12a9f2ebaf22b from
https://source.codeaurora.org/external/imx/linux-imx.git

The FSL_SAI_VERID and FSL_SAI_PARAM only available
when reg_offset is 8

Signed-off-by: Shengjiu Wang <shengjiu.wang@nxp.com>
(cherry picked from commit 0a0695672dc7ecf07a7642ff6f99f0b9d3a26b32)
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 sound/soc/fsl/fsl_sai.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/sound/soc/fsl/fsl_sai.c b/sound/soc/fsl/fsl_sai.c
index 61e41b7..61800b885 100644
--- a/sound/soc/fsl/fsl_sai.c
+++ b/sound/soc/fsl/fsl_sai.c
@@ -1151,9 +1151,11 @@ static bool fsl_sai_volatile_reg(struct device *dev, unsigned int reg)
 	if (reg == FSL_SAI_TCSR(offset) || reg == FSL_SAI_RCSR(offset))
 		return true;
 
+	if (sai->soc->reg_offset == 8 && (reg == FSL_SAI_VERID ||
+				reg == FSL_SAI_PARAM))
+		return true;
+
 	switch (reg) {
-	case FSL_SAI_VERID:
-	case FSL_SAI_PARAM:
 	case FSL_SAI_TFR0:
 	case FSL_SAI_TFR1:
 	case FSL_SAI_TFR2:
-- 
1.7.9.5


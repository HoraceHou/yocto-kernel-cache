From a76778b9662edd9a51e10747828d91fd70d0c52b Mon Sep 17 00:00:00 2001
From: Adriana Reus <adriana.reus@nxp.com>
Date: Wed, 12 Apr 2017 13:45:13 +0300
Subject: [PATCH 1666/5242] MLK-14451: arm: dts: Remove dts entry for sensors
 in imx7ulp-evk.dts

commit  21a861d1e90d7932133594f04647aaa91cd6d3f9 from
https://source.codeaurora.org/external/imx/linux-imx.git

Sensors are connected to M4 and not to A-Core.
Sensors will not be exposed to A-Core via standard
i2c interface but via an i2c proxy layer over rpmsg.

Remove the dts entry to avoid the probe error messages and
add a separate dts file for the case where someone wishes to
rework the board themselves and connect sensors for testing purposes.

Signed-off-by: Adriana Reus <adriana.reus@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/Makefile                        |    3 ++-
 arch/arm/boot/dts/imx7ulp-evk-sensors-to-i2c5.dts |   22 +++++++++++++++++++++
 arch/arm/boot/dts/imx7ulp-evk.dts                 |   15 --------------
 3 files changed, 24 insertions(+), 16 deletions(-)
 create mode 100644 arch/arm/boot/dts/imx7ulp-evk-sensors-to-i2c5.dts

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index 3bfeff1..82cbef5 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -707,7 +707,8 @@ dtb-$(CONFIG_SOC_IMX7ULP) += \
 	imx7ulp-evk-lpuart.dtb \
 	imx7ulp-evk-qspi.dtb \
 	imx7ulp-evk-wm8960.dtb \
-	imx7ulp-evk-hdmi.dtb
+	imx7ulp-evk-hdmi.dtb \
+	imx7ulp-evk-sensors-to-i2c5.dtb
 dtb-$(CONFIG_SOC_LS1021A) += \
 	ls1021a-moxa-uc-8410a.dtb \
 	ls1021a-qds.dtb \
diff --git a/arch/arm/boot/dts/imx7ulp-evk-sensors-to-i2c5.dts b/arch/arm/boot/dts/imx7ulp-evk-sensors-to-i2c5.dts
new file mode 100644
index 0000000..54f0e61
--- /dev/null
+++ b/arch/arm/boot/dts/imx7ulp-evk-sensors-to-i2c5.dts
@@ -0,0 +1,22 @@
+
+#include "imx7ulp-evk.dts"
+
+&lpi2c5 {
+
+	fxas2100x@20 {
+		compatible = "fsl,fxas2100x";
+		reg = <0x20>;
+	};
+
+	fxos8700@1e {
+		compatible = "fsl,fxos8700";
+		reg = <0x1e>;
+	};
+
+	mpl3115@60 {
+		compatible = "fsl,mpl3115";
+		reg = <0x60>;
+	};
+
+};
+
diff --git a/arch/arm/boot/dts/imx7ulp-evk.dts b/arch/arm/boot/dts/imx7ulp-evk.dts
index 984fcde..5e7fc37 100644
--- a/arch/arm/boot/dts/imx7ulp-evk.dts
+++ b/arch/arm/boot/dts/imx7ulp-evk.dts
@@ -418,21 +418,6 @@
 		bpp = <24>;
 		status = "disabled";
 	};
-
-	fxas2100x@20 {
-		compatible = "fsl,fxas2100x";
-		reg = <0x20>;
-	};
-
-	fxos8700@1e {
-		compatible = "fsl,fxos8700";
-		reg = <0x1e>;
-	};
-
-	mpl3115@60 {
-		compatible = "fsl,mpl3115";
-		reg = <0x60>;
-	};
 };
 
 &lpspi3 {
-- 
1.7.9.5


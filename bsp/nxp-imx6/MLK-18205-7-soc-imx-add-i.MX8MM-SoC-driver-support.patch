From 002604fe44dc4d1923a45d99fb8a3f2bcbd23e28 Mon Sep 17 00:00:00 2001
From: Anson Huang <Anson.Huang@nxp.com>
Date: Fri, 4 May 2018 17:27:23 +0800
Subject: [PATCH 3726/5242] MLK-18205-7 soc: imx: add i.MX8MM SoC driver
 support

commit  7c0406a1645883c9a8c1124fc2720ef25ca41e52 from
https://source.codeaurora.org/external/imx/linux-imx.git

Add i.MX8MM SoC ID driver support.

Signed-off-by: Anson Huang <Anson.Huang@nxp.com>
Reviewed-by: Bai Ping <ping.bai@nxp.com>
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/soc/imx/soc-imx8.c |   14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

diff --git a/drivers/soc/imx/soc-imx8.c b/drivers/soc/imx/soc-imx8.c
index f609c76..81f7b87 100644
--- a/drivers/soc/imx/soc-imx8.c
+++ b/drivers/soc/imx/soc-imx8.c
@@ -1,6 +1,6 @@
 /*
  * Copyright (C) 2016 Freescale Semiconductor, Inc.
- * Copyright 2017 NXP
+ * Copyright 2017-2018 NXP
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
@@ -198,6 +198,12 @@ static u32 imx8mq_soc_revision(void)
 	return imx_init_revision_from_atf();
 }
 
+static u32 imx8mm_soc_revision(void)
+{
+	imx8_soc_uid = imx8mq_soc_get_soc_uid();
+	return imx_init_revision_from_atf();
+}
+
 static struct imx8_soc_data imx8qm_soc_data = {
 	.name = "i.MX8QM",
 	.soc_revision = imx8qm_soc_revision,
@@ -213,10 +219,16 @@ static u32 imx8mq_soc_revision(void)
 	.soc_revision = imx8mq_soc_revision,
 };
 
+static struct imx8_soc_data imx8mm_soc_data = {
+	.name = "i.MX8MM",
+	.soc_revision = imx8mm_soc_revision,
+};
+
 static const struct of_device_id imx8_soc_match[] = {
 	{ .compatible = "fsl,imx8qm", .data = &imx8qm_soc_data, },
 	{ .compatible = "fsl,imx8qxp", .data = &imx8qxp_soc_data, },
 	{ .compatible = "fsl,imx8mq", .data = &imx8mq_soc_data, },
+	{ .compatible = "fsl,imx8mm", .data = &imx8mm_soc_data, },
 	/* Fixme: this is a hack for big/little xen guest, b0 no need this */
 	{ .compatible = "xen,xenvm", .data = &imx8qm_soc_data, },
 	{ }
-- 
1.7.9.5

